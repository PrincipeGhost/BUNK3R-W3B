<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>BUNK3R</title>
    <style>
        body{margin:0;padding:0;background:#0d0d1a;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif}
        
        .preload-overlay{
            position:fixed;top:0;left:0;right:0;bottom:0;
            background:linear-gradient(180deg, #0d0d1a 0%, #1a1a2e 50%, #0d0d1a 100%);
            display:flex;flex-direction:column;align-items:center;justify-content:center;
            z-index:99999;
            overflow:hidden;
        }
        
        .preload-overlay::before{
            content:'';position:absolute;top:0;left:0;right:0;bottom:0;
            background:repeating-linear-gradient(
                0deg,
                transparent,
                transparent 2px,
                rgba(255,255,255,0.02) 2px,
                rgba(255,255,255,0.02) 4px
            );
            pointer-events:none;
            animation:scanlines 8s linear infinite;
        }
        
        .preload-overlay::after{
            content:'';position:absolute;top:0;left:0;right:0;bottom:0;
            background:radial-gradient(ellipse at center, transparent 0%, rgba(0,0,0,0.4) 100%);
            pointer-events:none;
        }
        
        .preload-glow{
            position:absolute;width:300px;height:300px;
            background:radial-gradient(circle, rgba(66,153,225,0.15) 0%, transparent 70%);
            animation:pulse-glow 3s ease-in-out infinite;
            filter:blur(60px);
        }
        
        .preload-glow.secondary{
            background:radial-gradient(circle, rgba(252,129,129,0.1) 0%, transparent 70%);
            animation-delay:1.5s;
            transform:translateX(50px);
        }
        
        .preload-content{
            position:relative;z-index:2;
            display:flex;flex-direction:column;align-items:center;
            animation:fade-in 0.8s ease-out;
        }
        
        .preload-logo-container{
            position:relative;margin-bottom:40px;
        }
        
        .preload-logo{
            font-size:52px;font-weight:900;color:#fff;
            letter-spacing:6px;
            text-shadow:
                0 0 10px rgba(66,153,225,0.5),
                0 0 30px rgba(66,153,225,0.3),
                0 0 60px rgba(66,153,225,0.2),
                2px 2px 0 #16213e,
                4px 4px 0 #0d0d1a;
            font-family:'Courier New',monospace;
            animation:logo-flicker 4s ease-in-out infinite;
            position:relative;
        }
        
        .preload-logo::before{
            content:'BUNK3R';position:absolute;top:0;left:0;
            color:#4299e1;opacity:0;
            animation:glitch-1 3s linear infinite;
            clip-path:polygon(0 0, 100% 0, 100% 45%, 0 45%);
        }
        
        .preload-logo::after{
            content:'BUNK3R';position:absolute;top:0;left:0;
            color:#fc8181;opacity:0;
            animation:glitch-2 3s linear infinite;
            clip-path:polygon(0 55%, 100% 55%, 100% 100%, 0 100%);
        }
        
        .preload-logo .red{
            color:#fc8181;
            text-shadow:
                0 0 10px rgba(252,129,129,0.6),
                0 0 30px rgba(252,129,129,0.4),
                0 0 60px rgba(252,129,129,0.2),
                2px 2px 0 #16213e,
                4px 4px 0 #0d0d1a;
            position:relative;
            display:inline-block;
            animation:number-pulse 2s ease-in-out infinite;
        }
        
        .preload-tagline{
            font-size:11px;color:#4299e1;
            letter-spacing:8px;text-transform:uppercase;
            margin-top:8px;opacity:0.7;
            font-family:'Courier New',monospace;
        }
        
        .preload-loader{
            display:flex;flex-direction:column;align-items:center;
            margin-bottom:30px;
        }
        
        .preload-bar-container{
            width:200px;height:6px;
            background:rgba(255,255,255,0.1);
            border-radius:3px;
            overflow:hidden;
            position:relative;
            border:1px solid rgba(255,255,255,0.1);
        }
        
        .preload-bar{
            height:100%;width:0%;
            background:linear-gradient(90deg, #4299e1 0%, #667eea 50%, #fc8181 100%);
            border-radius:3px;
            animation:loading-bar 2.5s ease-in-out forwards;
            box-shadow:0 0 10px rgba(66,153,225,0.5);
        }
        
        .preload-bar::after{
            content:'';position:absolute;top:0;left:0;right:0;bottom:0;
            background:linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.3) 50%, transparent 100%);
            animation:shimmer 1.5s infinite;
        }
        
        .preload-pixels{
            display:flex;gap:4px;margin-top:20px;
        }
        
        .preload-pixel{
            width:8px;height:8px;
            background:#4299e1;
            animation:pixel-dance 0.8s ease-in-out infinite;
        }
        
        .preload-pixel:nth-child(1){animation-delay:0s;background:#4299e1}
        .preload-pixel:nth-child(2){animation-delay:0.1s;background:#667eea}
        .preload-pixel:nth-child(3){animation-delay:0.2s;background:#9f7aea}
        .preload-pixel:nth-child(4){animation-delay:0.3s;background:#fc8181}
        .preload-pixel:nth-child(5){animation-delay:0.4s;background:#f6ad55}
        
        .preload-text{
            color:#a0aec0;font-size:12px;
            letter-spacing:2px;text-transform:uppercase;
            font-family:'Courier New',monospace;
            margin-top:16px;
        }
        
        .preload-text::after{
            content:'';animation:cursor-blink 1s step-end infinite;
        }
        
        .preload-version{
            position:absolute;bottom:30px;
            font-size:10px;color:rgba(255,255,255,0.2);
            letter-spacing:2px;
            font-family:'Courier New',monospace;
        }
        
        @keyframes scanlines{from{background-position:0 0}to{background-position:0 100%}}
        @keyframes pulse-glow{0%,100%{opacity:0.5;transform:scale(1)}50%{opacity:0.8;transform:scale(1.1)}}
        @keyframes fade-in{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
        @keyframes logo-flicker{0%,100%{opacity:1}95%{opacity:1}96%{opacity:0.8}97%{opacity:1}98%{opacity:0.9}99%{opacity:1}}
        @keyframes glitch-1{0%,95%{opacity:0}96%{opacity:0.6;transform:translateX(-2px)}97%{opacity:0}98%{opacity:0.4;transform:translateX(2px)}100%{opacity:0}}
        @keyframes glitch-2{0%,93%{opacity:0}94%{opacity:0.5;transform:translateX(3px)}95%{opacity:0}97%{opacity:0.3;transform:translateX(-3px)}100%{opacity:0}}
        @keyframes number-pulse{0%,100%{transform:scale(1);filter:brightness(1)}50%{transform:scale(1.05);filter:brightness(1.2)}}
        @keyframes loading-bar{0%{width:0%}20%{width:20%}40%{width:35%}60%{width:65%}80%{width:85%}100%{width:100%}}
        @keyframes shimmer{0%{transform:translateX(-100%)}100%{transform:translateX(100%)}}
        @keyframes pixel-dance{0%,100%{transform:translateY(0);opacity:0.6}50%{transform:translateY(-6px);opacity:1}}
        @keyframes cursor-blink{0%,100%{content:'_'}50%{content:''}}
        
        .preload-overlay.fade-out{
            animation:overlay-fadeout 0.5s ease-out forwards;
        }
        
        @keyframes overlay-fadeout{
            0%{opacity:1;transform:scale(1)}
            100%{opacity:0;transform:scale(1.02);pointer-events:none}
        }
    </style>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tonconnect/ui@2.3.0/dist/tonconnect-ui.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body>
    <div class="preload-overlay" id="preload-overlay">
        <div class="preload-glow"></div>
        <div class="preload-glow secondary"></div>
        
        <div class="preload-content">
            <div class="preload-logo-container">
                <div class="preload-logo">BUNK<span class="red">3</span>R</div>
                <div class="preload-tagline">Secure Access</div>
            </div>
            
            <div class="preload-loader">
                <div class="preload-bar-container">
                    <div class="preload-bar"></div>
                </div>
                
                <div class="preload-pixels">
                    <div class="preload-pixel"></div>
                    <div class="preload-pixel"></div>
                    <div class="preload-pixel"></div>
                    <div class="preload-pixel"></div>
                    <div class="preload-pixel"></div>
                </div>
                
                <p class="preload-text">Inicializando</p>
            </div>
        </div>
        
        <div class="preload-version">v2.0</div>
    </div>
    <div id="app">
        <div id="loading-screen" class="loading-screen hidden">
            <div class="loader"></div>
            <p>Verificando acceso...</p>
        </div>

        <div id="access-denied" class="access-denied hidden">
            <div class="denied-icon">üö´</div>
            <h2>Acceso Denegado</h2>
            <p id="denied-message">No tienes permiso para acceder a esta aplicaci√≥n.</p>
        </div>

        <!-- PANTALLA DE CONFIGURACION 2FA -->
        <div id="setup-2fa-screen" class="auth-screen hidden">
            <div class="auth-container">
                <div class="auth-logo">BUNK<span class="red">3</span>R</div>
                <div class="auth-icon">üîê</div>
                <h2 class="auth-title">Configurar 2FA</h2>
                <p class="auth-subtitle">Protege tu cuenta con Google Authenticator</p>
                
                <div class="qr-container" id="qr-container">
                    <img id="qr-code-img" src="" alt="Codigo QR" class="qr-code-img">
                </div>
                
                <div class="secret-container">
                    <p class="secret-label">O ingresa este codigo manualmente:</p>
                    <code class="secret-code" id="secret-code"></code>
                </div>
                
                <div class="auth-input-group">
                    <label class="auth-label">Codigo de 6 digitos</label>
                    <input type="text" id="setup-2fa-code" class="auth-input" maxlength="6" pattern="[0-9]*" inputmode="numeric" placeholder="000000" autocomplete="off">
                </div>
                
                <button class="auth-btn primary" id="verify-setup-2fa-btn">Verificar y Activar</button>
                <button class="auth-btn secondary" id="skip-2fa-btn">Configurar despues</button>
                
                <p class="auth-hint">Escanea el codigo QR con Google Authenticator, Authy u otra app de autenticacion</p>
            </div>
        </div>

        <!-- PANTALLA DE VERIFICACION 2FA -->
        <div id="verify-2fa-screen" class="auth-screen hidden">
            <div class="auth-container verify-2fa-container">
                <div class="auth-logo">BUNK<span class="red">3</span>R</div>
                
                <div class="security-shield-icon">
                    <div class="shield-outer">
                        <div class="shield-inner">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="32" height="32" aria-hidden="true">
                                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                                <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                            </svg>
                        </div>
                    </div>
                </div>
                
                <h2 class="auth-title">Verificacion 2FA</h2>
                <p class="auth-subtitle">Ingresa el codigo de tu app de autenticacion</p>
                
                <div class="otp-input-group">
                    <label class="auth-label">Codigo de 6 digitos</label>
                    <div class="otp-inputs-container" id="otp-inputs-container">
                        <input type="text" class="otp-input" maxlength="1" pattern="[0-9]*" inputmode="numeric" autocomplete="off" data-index="0">
                        <input type="text" class="otp-input" maxlength="1" pattern="[0-9]*" inputmode="numeric" autocomplete="off" data-index="1">
                        <input type="text" class="otp-input" maxlength="1" pattern="[0-9]*" inputmode="numeric" autocomplete="off" data-index="2">
                        <div class="otp-separator"></div>
                        <input type="text" class="otp-input" maxlength="1" pattern="[0-9]*" inputmode="numeric" autocomplete="off" data-index="3">
                        <input type="text" class="otp-input" maxlength="1" pattern="[0-9]*" inputmode="numeric" autocomplete="off" data-index="4">
                        <input type="text" class="otp-input" maxlength="1" pattern="[0-9]*" inputmode="numeric" autocomplete="off" data-index="5">
                    </div>
                    <input type="hidden" id="verify-2fa-code" value="">
                </div>
                
                <p class="auth-error hidden" id="verify-2fa-error"></p>
                
                <div class="verify-loading hidden" id="verify-loading">
                    <div class="verify-spinner"></div>
                    <span>Verificando...</span>
                </div>
                
                <button class="auth-btn primary" id="verify-2fa-btn">
                    <span class="btn-text">Verificar</span>
                </button>
                
                <div class="security-footer">
                    <div class="security-badge">
                        <svg viewBox="0 0 24 24" fill="currentColor" width="14" height="14">
                            <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                        </svg>
                        <span>Conexion segura</span>
                    </div>
                    <p class="auth-hint">Abre Google Authenticator y copia el codigo de BUNK3R</p>
                </div>
            </div>
        </div>

        <!-- PANTALLA DE BLOQUEO - DISPOSITIVO NO CONFIABLE -->
        <div id="device-blocked-screen" class="auth-screen hidden">
            <div class="auth-container">
                <div class="auth-logo">BUNK<span class="red">3</span>R</div>
                <div class="auth-icon">üîê</div>
                <h2 class="auth-title">Acceso Restringido</h2>
                <p class="auth-subtitle">Para acceder a tu billetera, verifica tu dispositivo</p>
                
                <div class="wallet-preview-card" id="wallet-preview-card">
                    <div class="wallet-preview-label">Tu saldo</div>
                    <div class="wallet-preview-amount">
                        <span class="blur-amount">$***</span>
                    </div>
                    <div class="wallet-preview-hint">Conecta tu wallet para ver el saldo</div>
                </div>
                
                <div class="device-info-card">
                    <div class="device-info-icon">üì±</div>
                    <div class="device-info-text">
                        <span class="device-info-title">Dispositivo no reconocido</span>
                        <span class="device-info-desc">Este dispositivo no esta en tu lista de confianza</span>
                    </div>
                </div>
                
                <button class="auth-btn primary" id="trust-device-btn">
                    <span class="btn-icon">üîó</span>
                    Conectar Wallet de Telegram
                </button>
                
                <button class="auth-btn secondary" id="view-readonly-btn">
                    Ver en modo lectura
                </button>
                
                <p class="auth-hint">Necesitas conectar la misma wallet registrada en tu cuenta y verificar con 2FA</p>
            </div>
        </div>

        <!-- PANTALLA DE WALLET INCORRECTA -->
        <div id="wrong-wallet-screen" class="auth-screen hidden">
            <div class="auth-container">
                <div class="auth-logo">BUNK<span class="red">3</span>R</div>
                <div class="auth-icon">‚ö†Ô∏è</div>
                <h2 class="auth-title">Wallet Incorrecta</h2>
                <p class="auth-subtitle">Esta no es tu wallet registrada</p>
                
                <div class="wrong-wallet-info">
                    <div class="wrong-wallet-row">
                        <span class="wrong-wallet-label">Wallet esperada:</span>
                        <span class="wrong-wallet-value" id="expected-wallet-hint">UQ...xxxx</span>
                    </div>
                    <div class="wrong-wallet-row">
                        <span class="wrong-wallet-label">Wallet conectada:</span>
                        <span class="wrong-wallet-value wrong" id="connected-wallet-hint">UQ...yyyy</span>
                    </div>
                </div>
                
                <div class="attempts-warning" id="attempts-warning">
                    <span class="attempts-icon">‚ö†Ô∏è</span>
                    <span class="attempts-text">Intentos restantes: <strong id="attempts-remaining">3</strong></span>
                </div>
                
                <button class="auth-btn primary" id="retry-wallet-btn">Conectar otra wallet</button>
                <button class="auth-btn secondary" id="cancel-wallet-btn">Cancelar</button>
                
                <p class="auth-hint">Debes usar EXACTAMENTE la misma wallet asociada a tu cuenta</p>
            </div>
        </div>

        <!-- PANTALLA DE CUENTA BLOQUEADA -->
        <div id="account-locked-screen" class="auth-screen hidden">
            <div class="auth-container">
                <div class="auth-logo">BUNK<span class="red">3</span>R</div>
                <div class="auth-icon">üîí</div>
                <h2 class="auth-title">Cuenta Bloqueada</h2>
                <p class="auth-subtitle">Demasiados intentos fallidos</p>
                
                <div class="lockout-timer">
                    <div class="lockout-icon">‚è±Ô∏è</div>
                    <div class="lockout-time" id="lockout-time">15:00</div>
                    <div class="lockout-text">minutos restantes</div>
                </div>
                
                <div class="lockout-info">
                    <p>Tu cuenta ha sido bloqueada temporalmente por seguridad.</p>
                    <p>Intentaste conectar una wallet diferente a la registrada.</p>
                </div>
                
                <button class="auth-btn secondary" id="contact-support-btn">Contactar Soporte</button>
                
                <p class="auth-hint">Si no reconoces esta actividad, contacta a soporte inmediatamente</p>
            </div>
        </div>

        <!-- MODAL AGREGAR DISPOSITIVO DE CONFIANZA -->
        <div id="add-device-modal" class="modal-overlay hidden" role="dialog" aria-modal="true" aria-labelledby="add-device-modal-title">
            <div class="modal-container">
                <div class="modal-header">
                    <span class="modal-title" id="add-device-modal-title">Agregar Dispositivo de Confianza</span>
                    <button class="modal-close" id="close-add-device-modal" aria-label="Cerrar modal">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="add-device-steps">
                        <div class="step-item active" data-step="1">
                            <div class="step-number">1</div>
                            <div class="step-text">Conectar Wallet</div>
                        </div>
                        <div class="step-divider"></div>
                        <div class="step-item" data-step="2">
                            <div class="step-number">2</div>
                            <div class="step-text">Verificar 2FA</div>
                        </div>
                        <div class="step-divider"></div>
                        <div class="step-item" data-step="3">
                            <div class="step-number">3</div>
                            <div class="step-text">Confirmar</div>
                        </div>
                    </div>
                    
                    <div class="add-device-content" id="add-device-step-1">
                        <div class="step-icon">üîó</div>
                        <h3>Conecta tu Wallet de Telegram</h3>
                        <p>Debes conectar la misma wallet que tienes registrada en tu cuenta</p>
                        <button class="auth-btn primary" id="add-device-connect-wallet">Conectar Wallet</button>
                    </div>
                    
                    <div class="add-device-content hidden" id="add-device-step-2">
                        <div class="step-icon">üîê</div>
                        <h3>Verificacion 2FA</h3>
                        <p>Ingresa el codigo de tu app de autenticacion</p>
                        <input type="text" class="auth-input" id="add-device-2fa-code" maxlength="6" pattern="[0-9]*" inputmode="numeric" placeholder="000000">
                        <button class="auth-btn primary" id="add-device-verify-2fa">Verificar</button>
                    </div>
                    
                    <div class="add-device-content hidden" id="add-device-step-3">
                        <div class="step-icon">üì±</div>
                        <h3>Nombra tu Dispositivo</h3>
                        <p>Dale un nombre para identificarlo facilmente</p>
                        <input type="text" class="auth-input" id="add-device-name" placeholder="Ej: Mi telefono principal">
                        <button class="auth-btn primary" id="add-device-confirm">Agregar Dispositivo</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="main-app" class="hidden">
            <!-- BARRA SUPERIOR -->
            <div class="top-bar">
                <div class="top-bar-left">
                    <button class="hamburger-menu" id="hamburger-menu" aria-label="Abrir menu" aria-expanded="false" aria-controls="sidebar">
                        <span></span>
                        <span></span>
                        <span></span>
                    </button>
                    <span class="top-bar-title">BUNK<span class="highlight-red">3</span>R</span>
                </div>
            </div>

            <!-- MENU LATERAL -->
            <div class="sidebar-overlay" id="sidebar-overlay" aria-hidden="true"></div>
            <nav class="sidebar" id="sidebar" role="navigation" aria-label="Menu principal">
                <div class="sidebar-header">
                    <span class="sidebar-title">BUNK<span class="highlight-red">3</span>R</span>
                    <button class="sidebar-close" id="sidebar-close" aria-label="Cerrar menu">&times;</button>
                </div>
                <nav class="sidebar-nav">
                    <a href="#" class="sidebar-item" data-section="numeros">
                        <span class="sidebar-icon">üì±</span>
                        <span>Numeros Virtuales</span>
                    </a>
                    <a href="#" class="sidebar-item" data-section="cuentas">
                        <span class="sidebar-icon">üë§</span>
                        <span>Cuentas</span>
                    </a>
                    <a href="#" class="sidebar-item" data-section="metodos">
                        <span class="sidebar-icon">üí≥</span>
                        <span>Metodos</span>
                    </a>
                    <a href="#" class="sidebar-item" data-section="bots">
                        <span class="sidebar-icon">ü§ñ</span>
                        <span>Bots</span>
                    </a>
                    <a href="#" class="sidebar-item" data-section="planes">
                        <span class="sidebar-icon">üíé</span>
                        <span>Planes y Precios</span>
                    </a>
                    <a href="#" class="sidebar-item" data-section="exchange">
                        <span class="sidebar-icon">üîÑ</span>
                        <span>Exchange</span>
                    </a>
                    <a href="#" class="sidebar-item" data-section="foro">
                        <span class="sidebar-icon">üí¨</span>
                        <span>Foro</span>
                    </a>
                    <div class="sidebar-divider"></div>
                    <a href="#" class="sidebar-item" data-section="settings">
                        <span class="sidebar-icon">‚öôÔ∏è</span>
                        <span>Configuracion</span>
                    </a>
                </nav>
                <div class="sidebar-profile" id="sidebar-profile">
                    <div class="sidebar-profile-avatar" id="sidebar-avatar"></div>
                    <div class="sidebar-profile-info">
                        <span class="sidebar-profile-name" id="sidebar-name"></span>
                        <span class="sidebar-profile-role" id="sidebar-role">Usuario</span>
                    </div>
                    <div class="sidebar-admin-arrow hidden" id="sidebar-admin-arrow">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18" aria-hidden="true">
                            <polyline points="9 18 15 12 9 6"></polyline>
                        </svg>
                    </div>
                </div>
            </nav>

            <!-- PAGINA PRINCIPAL / HOME -->
            <div id="home-screen" class="home-screen">
                <!-- Header Bar with Notification Bell -->
                <div class="home-header" id="home-header">
                    <div class="home-header-left">
                        <button class="sidebar-toggle-btn" id="sidebar-toggle-btn" onclick="App.toggleSidebar()" aria-label="Abrir menu">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="24" height="24" aria-hidden="true">
                                <line x1="3" y1="12" x2="21" y2="12"></line>
                                <line x1="3" y1="6" x2="21" y2="6"></line>
                                <line x1="3" y1="18" x2="21" y2="18"></line>
                            </svg>
                        </button>
                        <span class="home-header-logo">BUNK<span class="red">3</span>R</span>
                    </div>
                    <div class="home-header-right">
                        <button class="header-notif-btn" id="header-notif-btn" onclick="App.handleBottomNav('notifications')" aria-label="Notificaciones">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="22" height="22" aria-hidden="true">
                                <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                                <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                            </svg>
                            <span class="header-notif-badge hidden" id="header-notif-badge">0</span>
                        </button>
                        <div class="header-avatar" id="header-avatar" onclick="App.handleBottomNav('profile')">
                            <span class="header-avatar-initial" id="header-avatar-initial">U</span>
                        </div>
                    </div>
                </div>
                
                <!-- Stories Bar -->
                <div class="stories-bar" id="stories-bar">
                    <div class="story-item add-story" onclick="PublicationsManager.createStory()">
                        <div class="story-avatar-wrapper add">
                            <div class="story-avatar" id="add-story-avatar">
                                <span class="story-add-icon">+</span>
                            </div>
                        </div>
                        <span class="story-username">Tu historia</span>
                    </div>
                    <div class="stories-list" id="stories-list">
                        <!-- Historias de otros usuarios -->
                    </div>
                </div>
                
                <!-- Trending Hashtags -->
                <div class="trending-hashtags-bar hidden" id="trending-hashtags-bar">
                    <div class="trending-header">
                        <span class="trending-title">Trending</span>
                    </div>
                    <div class="trending-tags-list" id="trending-tags-list">
                    </div>
                </div>
                
                <!-- Feed de Publicaciones -->
                <div class="publications-feed" id="publications-feed">
                    <div class="feed-loading">
                        <div class="loading-spinner"></div>
                        <p>Cargando publicaciones...</p>
                    </div>
                </div>
            </div>

            <!-- PAGINA MARKETPLACE -->
            <div id="marketplace-screen" class="page-screen hidden">
                <div class="page-header">
                    <h1 class="page-title">Marketplace</h1>
                    <p class="page-subtitle">Explora y compra productos</p>
                </div>
                <div class="marketplace-categories">
                    <button class="category-chip active">Todo</button>
                    <button class="category-chip">Cuentas</button>
                    <button class="category-chip">Metodos</button>
                    <button class="category-chip">Servicios</button>
                    <button class="category-chip">Tools</button>
                </div>
                <div class="marketplace-grid">
                    <div class="marketplace-empty">
                        <div class="empty-icon">üõí</div>
                        <p>No hay productos disponibles</p>
                        <span class="empty-hint">Los productos apareceran aqui cuando esten disponibles</span>
                    </div>
                </div>
            </div>

            <!-- PAGINA BOTS -->
            <div id="bots-screen" class="page-screen hidden">
                <div class="page-header">
                    <h1 class="page-title">Mis Bots</h1>
                    <p class="page-subtitle">Administra tus bots</p>
                </div>
                <div class="bots-section">
                    <h2 class="section-title">Tus Bots Activos</h2>
                    <div class="bots-list" id="my-bots-list">
                        <div class="bots-loading">
                            <div class="loading-spinner"></div>
                            <p>Cargando tus bots...</p>
                        </div>
                    </div>
                    <div class="bots-empty hidden" id="my-bots-empty">
                        <div class="empty-icon">ü§ñ</div>
                        <p>No tienes bots activos aun</p>
                        <span class="empty-hint">Obtiene bots para automatizar tus tareas</span>
                    </div>
                </div>
            </div>

            <!-- PAGINA EXCHANGE -->
            <div id="exchange-screen" class="page-screen hidden">
                <div class="page-header">
                    <h1 class="page-title">Exchange</h1>
                    <p class="page-subtitle">Intercambia criptomonedas al instante</p>
                </div>
                
                <div class="exchange-container">
                    <div class="exchange-card">
                        <div class="exchange-form">
                            <div class="exchange-input-group">
                                <label class="exchange-label">Envias</label>
                                <div class="exchange-input-row">
                                    <input type="number" id="exchange-amount-from" class="exchange-input" placeholder="0.00" step="any">
                                    <button class="currency-selector" id="from-currency-btn">
                                        <span class="currency-icon">‚Çø</span>
                                        <span class="currency-ticker" id="from-currency-ticker">BTC</span>
                                        <span class="dropdown-arrow">‚ñº</span>
                                    </button>
                                </div>
                                <span class="exchange-min-amount" id="min-amount-info"></span>
                            </div>
                            
                            <div class="exchange-swap-btn" id="swap-currencies-btn">
                                <span>‚áÖ</span>
                            </div>
                            
                            <div class="exchange-input-group">
                                <label class="exchange-label">Recibes (estimado)</label>
                                <div class="exchange-input-row">
                                    <input type="text" id="exchange-amount-to" class="exchange-input" placeholder="0.00" readonly>
                                    <button class="currency-selector" id="to-currency-btn">
                                        <span class="currency-icon">Œû</span>
                                        <span class="currency-ticker" id="to-currency-ticker">ETH</span>
                                        <span class="dropdown-arrow">‚ñº</span>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="exchange-rate-info" id="exchange-rate-info">
                                <span class="rate-label">Tasa:</span>
                                <span class="rate-value" id="rate-value">--</span>
                            </div>
                            
                            <div class="exchange-input-group">
                                <label class="exchange-label">Tu direccion de <span id="to-currency-label">ETH</span></label>
                                <input type="text" id="exchange-address" class="exchange-input address-input" placeholder="Ingresa tu direccion de wallet">
                            </div>
                            
                            <div class="exchange-input-group">
                                <label class="exchange-label">Direccion de reembolso (opcional)</label>
                                <input type="text" id="exchange-refund-address" class="exchange-input address-input" placeholder="Direccion para reembolso en caso de error">
                            </div>
                            
                            <button class="exchange-submit-btn" id="create-exchange-btn">
                                <span class="btn-text">Intercambiar</span>
                                <span class="btn-loader hidden"></span>
                            </button>
                        </div>
                    </div>
                    
                    <div class="exchange-result hidden" id="exchange-result">
                        <div class="result-header">
                            <span class="result-icon">‚úì</span>
                            <h3>Intercambio Creado</h3>
                        </div>
                        <div class="result-details">
                            <div class="result-item">
                                <span class="result-label">ID de Transaccion:</span>
                                <span class="result-value" id="result-tx-id">--</span>
                            </div>
                            <div class="result-item">
                                <span class="result-label">Envia <span id="result-from-currency">BTC</span> a:</span>
                                <div class="result-address-container">
                                    <span class="result-address" id="result-payin-address">--</span>
                                    <button class="copy-btn" id="copy-payin-address">Copiar</button>
                                </div>
                            </div>
                            <div class="result-item" id="result-extra-id-container" style="display: none;">
                                <span class="result-label">Memo/Tag:</span>
                                <span class="result-value" id="result-extra-id">--</span>
                            </div>
                            <div class="result-item">
                                <span class="result-label">Monto a enviar:</span>
                                <span class="result-value" id="result-amount">--</span>
                            </div>
                            <div class="result-status">
                                <span class="status-label">Estado:</span>
                                <span class="status-badge" id="result-status">Esperando deposito</span>
                            </div>
                        </div>
                        <button class="exchange-new-btn" id="new-exchange-btn">Nuevo Intercambio</button>
                    </div>
                </div>
                
                <div class="currency-modal hidden" id="currency-modal">
                    <div class="currency-modal-content">
                        <div class="currency-modal-header">
                            <h3>Seleccionar Moneda</h3>
                            <button class="currency-modal-close" id="currency-modal-close">&times;</button>
                        </div>
                        <input type="text" class="currency-search" id="currency-search" placeholder="Buscar moneda...">
                        <div class="currency-list" id="currency-list">
                            <div class="currency-loading">Cargando monedas...</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- PAGINA BUNK3RCO1N -->
            <div id="wallet-screen" class="page-screen hidden">
                <div class="page-header">
                    <h1 class="page-title">BUNK3RCO1N</h1>
                    <p class="page-subtitle">Gestiona tus BUNK3RCO1N</p>
                </div>
                
                <div class="ton-wallet-section">
                    <div class="ton-wallet-card" id="ton-wallet-card">
                        <div class="ton-wallet-not-connected" id="ton-wallet-not-connected">
                            <div class="ton-wallet-icon">
                                <svg viewBox="0 0 56 56" fill="none" xmlns="http://www.w3.org/2000/svg" width="48" height="48">
                                    <path d="M28 56C43.464 56 56 43.464 56 28C56 12.536 43.464 0 28 0C12.536 0 0 12.536 0 28C0 43.464 12.536 56 28 56Z" fill="#0098EA"/>
                                    <path d="M37.5603 15.6277H18.4386C14.9228 15.6277 12.6944 19.4202 14.4632 22.4861L26.2644 42.9409C27.0345 44.2765 28.9644 44.2765 29.7345 42.9409L41.5765 22.4861C43.3045 19.4202 41.0761 15.6277 37.5765 15.6277H37.5603Z" fill="white"/>
                                </svg>
                            </div>
                            <p class="ton-wallet-text">Conecta tu wallet de Telegram para recargar BUNK3RCO1N con USDT</p>
                            <button class="ton-connect-btn" id="ton-connect-btn">
                                <span>Conectar Wallet</span>
                            </button>
                        </div>
                        <div class="ton-wallet-connected hidden" id="ton-wallet-connected">
                            <div class="ton-wallet-info">
                                <div class="ton-wallet-icon-small">
                                    <svg viewBox="0 0 56 56" fill="none" xmlns="http://www.w3.org/2000/svg" width="32" height="32">
                                        <path d="M28 56C43.464 56 56 43.464 56 28C56 12.536 43.464 0 28 0C12.536 0 0 12.536 0 28C0 43.464 12.536 56 28 56Z" fill="#0098EA"/>
                                        <path d="M37.5603 15.6277H18.4386C14.9228 15.6277 12.6944 19.4202 14.4632 22.4861L26.2644 42.9409C27.0345 44.2765 28.9644 44.2765 29.7345 42.9409L41.5765 22.4861C43.3045 19.4202 41.0761 15.6277 37.5765 15.6277H37.5603Z" fill="white"/>
                                    </svg>
                                </div>
                                <div class="ton-wallet-details">
                                    <span class="ton-wallet-label" id="ton-wallet-status-label">Wallet conectada</span>
                                    <div class="ton-wallet-address-container">
                                        <span class="ton-wallet-address" id="ton-wallet-address"></span>
                                        <button class="ton-copy-btn" id="ton-copy-address" title="Copiar direccion">
                                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                                            </svg>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="ton-wallet-actions">
                                <button class="ton-change-btn" id="ton-change-btn">Cambiar wallet</button>
                                <button class="ton-disconnect-btn" id="ton-disconnect-btn">Desconectar</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="wallet-balance-card">
                    <div class="wallet-balance-header">
                        <span class="wallet-label">Saldo Disponible</span>
                        <div class="wallet-header-actions">
                            <button class="wallet-refresh-btn" onclick="App.refreshWallet()" title="Actualizar saldo">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M23 4v6h-6M1 20v-6h6M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"/>
                                </svg>
                            </button>
                            <span class="wallet-badge">BUNK3RCO1N</span>
                        </div>
                    </div>
                    <div class="wallet-balance-amount">
                        <span class="wallet-currency">$</span>
                        <span class="wallet-value" id="wallet-balance">0</span>
                    </div>
                    <div class="wallet-actions-row">
                        <button class="wallet-action-btn primary" id="add-credits-btn">
                            <span class="wallet-action-icon">+</span>
                            <span>Anadir</span>
                        </button>
                        <button class="wallet-action-btn secondary">
                            <span class="wallet-action-icon">‚Üë</span>
                            <span>Enviar</span>
                        </button>
                        <button class="wallet-action-btn secondary">
                            <span class="wallet-action-icon">‚Üì</span>
                            <span>Recibir</span>
                        </button>
                    </div>
                </div>
                <div class="wallet-section wallet-history-section">
                    <div class="wallet-section-header">
                        <h2 class="section-title">Historial de Transacciones</h2>
                        <button class="export-btn" id="export-history-btn" onclick="App.exportTransactionHistory()">Exportar</button>
                    </div>
                    <div class="transaction-filters">
                        <button class="tx-filter-btn active" data-filter="all">Todos</button>
                        <button class="tx-filter-btn" data-filter="credit">Recargas</button>
                        <button class="tx-filter-btn" data-filter="debit">Gastos</button>
                    </div>
                    <div class="transactions-list transactions-container" id="transactions-list">
                        <div class="transactions-empty">
                            <div class="empty-icon">üìã</div>
                            <p>No hay transacciones aun</p>
                            <span>Tus movimientos apareceran aqui</span>
                        </div>
                    </div>
                    <button id="load-more-transactions" class="btn-load-more hidden" onclick="App.loadMoreTransactions()">
                        Cargar mas
                    </button>
                </div>
                <div class="wallet-section">
                    <h2 class="section-title">Recargar BUNK3RCO1N con USDT</h2>
                    <p class="recharge-info">1 BUNK3RCO1N = 1 USDT</p>
                    <div class="recharge-options">
                        <div class="recharge-option" data-amount="5" data-usdt="5">
                            <span class="recharge-amount">5</span>
                            <span class="recharge-price">5 USDT</span>
                        </div>
                        <div class="recharge-option popular" data-amount="20" data-usdt="20">
                            <span class="recharge-badge">Popular</span>
                            <span class="recharge-amount">20</span>
                            <span class="recharge-price">20 USDT</span>
                        </div>
                        <div class="recharge-option" data-amount="50" data-usdt="50">
                            <span class="recharge-amount">50</span>
                            <span class="recharge-price">50 USDT</span>
                        </div>
                        <div class="recharge-option" data-amount="100" data-usdt="100">
                            <span class="recharge-amount">100</span>
                            <span class="recharge-price">100 USDT</span>
                        </div>
                    </div>
                    <div class="custom-recharge">
                        <label class="custom-recharge-label">Monto personalizado</label>
                        <div class="custom-recharge-input-row">
                            <input type="number" id="custom-usdt-amount" class="custom-recharge-input" placeholder="Cantidad en USDT" min="1">
                            <button class="custom-recharge-btn" id="custom-recharge-btn">Recargar</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- PAGINA NOTIFICACIONES -->
            <div id="notifications-screen" class="page-screen hidden">
                <div class="notifications-header">
                    <button class="back-btn" onclick="App.goToHome()" aria-label="Volver al inicio">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="24" height="24" aria-hidden="true">
                            <path d="M19 12H5M12 19l-7-7 7-7"/>
                        </svg>
                    </button>
                    <h1 class="notifications-title">Notificaciones</h1>
                    <div class="notifications-header-actions">
                        <button class="notif-settings-btn" id="notif-settings-btn" onclick="App.showNotificationSettings()" aria-label="Configuracion de notificaciones">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20" aria-hidden="true">
                                <circle cx="12" cy="12" r="3"></circle>
                                <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
                            </svg>
                        </button>
                        <button class="mark-all-read-btn" id="mark-all-read-btn" aria-label="Marcar todas como leidas">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20" aria-hidden="true">
                                <polyline points="9 11 12 14 22 4"></polyline>
                                <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="notifications-filter">
                    <button class="notif-filter-btn active" data-filter="all">Todas</button>
                    <button class="notif-filter-btn" data-filter="unread">No leidas</button>
                    <button class="notif-filter-btn" data-filter="transactions">üí∞ Transacciones</button>
                    <button class="notif-filter-btn" data-filter="likes">Likes</button>
                    <button class="notif-filter-btn" data-filter="comments">Comentarios</button>
                    <button class="notif-filter-btn" data-filter="follows">Seguidores</button>
                </div>
                <div class="notifications-list" id="notifications-list" role="list" aria-label="Lista de notificaciones">
                    <div class="notifications-loading">
                        <div class="skeleton-card"></div>
                        <div class="skeleton-card"></div>
                        <div class="skeleton-card"></div>
                    </div>
                </div>
                <div class="notifications-empty hidden" id="notifications-empty">
                    <div class="empty-icon">üîî</div>
                    <h3>Sin notificaciones</h3>
                    <p>Cuando alguien interactue contigo, aparecera aqui</p>
                </div>
            </div>

            <!-- PAGINA PERFIL -->
            <div id="profile-screen" class="page-screen hidden">
                <div class="profile-page-header">
                    <span class="profile-page-username" id="profile-page-username">@demo_user</span>
                    <span class="profile-verified-dot">‚óè</span>
                    <button class="profile-page-menu-btn" aria-label="Menu de perfil">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="24" height="24" aria-hidden="true">
                            <line x1="3" y1="12" x2="21" y2="12"></line>
                            <line x1="3" y1="6" x2="21" y2="6"></line>
                            <line x1="3" y1="18" x2="21" y2="18"></line>
                        </svg>
                    </button>
                </div>
                <div class="profile-page-content">
                    <div class="profile-page-top">
                        <div class="profile-page-avatar-wrap" id="avatar-upload-wrap">
                            <div class="profile-page-avatar" id="profile-page-avatar">
                                <img class="profile-page-avatar-img hidden" id="profile-avatar-img" alt="Avatar">
                                <span class="profile-page-avatar-initial" id="profile-avatar-initial">U</span>
                            </div>
                        </div>
                        <div class="profile-page-stats">
                            <div class="profile-page-stat">
                                <span class="profile-page-stat-num" id="profile-page-posts">0</span>
                                <span class="profile-page-stat-label">publicaciones</span>
                            </div>
                            <div class="profile-page-stat">
                                <span class="profile-page-stat-num" id="profile-page-followers">0</span>
                                <span class="profile-page-stat-label">seguidores</span>
                            </div>
                            <div class="profile-page-stat">
                                <span class="profile-page-stat-num" id="profile-page-following">0</span>
                                <span class="profile-page-stat-label">seguidos</span>
                            </div>
                        </div>
                    </div>
                    <div class="profile-page-buttons">
                        <button class="profile-page-btn primary" id="edit-profile-btn">Editar perfil</button>
                        <button class="profile-page-btn secondary" id="share-profile-btn">Compartir perfil</button>
                    </div>
                    <div class="profile-page-tabs">
                        <button class="profile-page-tab active" data-tab="posts" aria-label="Publicaciones">
                            <svg viewBox="0 0 24 24" fill="currentColor" width="22" height="22" aria-hidden="true">
                                <rect x="3" y="3" width="7" height="7"></rect>
                                <rect x="14" y="3" width="7" height="7"></rect>
                                <rect x="3" y="14" width="7" height="7"></rect>
                                <rect x="14" y="14" width="7" height="7"></rect>
                            </svg>
                        </button>
                        <button class="profile-page-tab" data-tab="marketplace" aria-label="Marketplace">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="22" height="22" aria-hidden="true">
                                <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                                <polyline points="9 22 9 12 15 12 15 22"></polyline>
                            </svg>
                        </button>
                        <button class="profile-page-tab" data-tab="shared" aria-label="Compartidos">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="22" height="22" aria-hidden="true">
                                <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"></path>
                                <path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"></path>
                                <path d="M4 22h16"></path>
                                <path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20 7 22"></path>
                                <path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20 17 22"></path>
                                <path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"></path>
                            </svg>
                        </button>
                        <button class="profile-page-tab" data-tab="account" aria-label="Cuenta">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="22" height="22" aria-hidden="true">
                                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                <circle cx="12" cy="7" r="4"></circle>
                            </svg>
                        </button>
                    </div>
                    
                    <!-- Vista Publicaciones -->
                    <div class="profile-tab-content active" id="tab-posts">
                        <div class="gallery-grid" id="profile-gallery">
                            <!-- Galeria de publicaciones cargada dinamicamente -->
                        </div>
                        <div class="empty-gallery hidden" id="empty-gallery">
                            <div class="empty-gallery-icon">üì∑</div>
                            <h4>Comparte tu primer momento</h4>
                            <p>Las fotos y videos que compartas aparecer√°n aqu√≠</p>
                        </div>
                    </div>
                    
                    <!-- Vista Marketplace -->
                    <div class="profile-tab-content" id="tab-marketplace">
                        <div class="profile-empty-state">
                            <div class="empty-icon">üè™</div>
                            <h3>Marketplace</h3>
                            <p>Aun no tienes productos en el marketplace</p>
                            <button class="profile-action-btn">Unirse al Marketplace</button>
                        </div>
                        <div class="marketplace-section">
                            <h4 class="section-title">Productos destacados</h4>
                            <div class="marketplace-grid">
                                <div class="marketplace-item">
                                    <div class="marketplace-img"></div>
                                    <span class="marketplace-price">$25</span>
                                </div>
                                <div class="marketplace-item">
                                    <div class="marketplace-img" style="background: #3a3a3a;"></div>
                                    <span class="marketplace-price">$45</span>
                                </div>
                                <div class="marketplace-item">
                                    <div class="marketplace-img" style="background: #4a4a4a;"></div>
                                    <span class="marketplace-price">$18</span>
                                </div>
                                <div class="marketplace-item">
                                    <div class="marketplace-img" style="background: #2a2a2a;"></div>
                                    <span class="marketplace-price">$32</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Vista Rese√±as -->
                    <div class="profile-tab-content" id="tab-shared">
                        <div class="profile-empty-state">
                            <div class="empty-icon">üèÜ</div>
                            <h3>Rese√±as</h3>
                            <p>Aun no tienes rese√±as</p>
                            <span class="empty-hint">Las rese√±as de otros usuarios apareceran aqui</span>
                        </div>
                    </div>
                    
                    <!-- Vista Cuenta -->
                    <div class="profile-tab-content" id="tab-account">
                        <div class="account-info-list">
                            <div class="account-info-item">
                                <span class="account-icon">üìÖ</span>
                                <div class="account-info-text">
                                    <span class="account-label">Miembro desde</span>
                                    <span class="account-value">Diciembre 2024</span>
                                </div>
                            </div>
                            <div class="account-info-item">
                                <span class="account-icon">ü§ñ</span>
                                <div class="account-info-text">
                                    <span class="account-label">Bots activos</span>
                                    <span class="account-value">0</span>
                                </div>
                            </div>
                            <div class="account-info-item">
                                <span class="account-icon">üèÜ</span>
                                <div class="account-info-text">
                                    <span class="account-label">Logros</span>
                                    <span class="account-value">Nuevo usuario</span>
                                </div>
                            </div>
                            <div class="account-info-item">
                                <span class="account-icon">‚≠ê</span>
                                <div class="account-info-text">
                                    <span class="account-label">Nivel</span>
                                    <span class="account-value">1</span>
                                </div>
                            </div>
                            <div class="account-info-item">
                                <span class="account-icon">üì¶</span>
                                <div class="account-info-text">
                                    <span class="account-label">Envios rastreados</span>
                                    <span class="account-value">0</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- SECCION SEGURIDAD -->
                        <div class="security-section">
                            <h3 class="security-section-title">Seguridad</h3>
                            
                            <!-- Widget Estado de Seguridad -->
                            <div class="security-status-widget" id="security-status-widget">
                                <div class="security-status-header">
                                    <div class="security-status-icon" id="security-status-icon">üõ°Ô∏è</div>
                                    <div class="security-status-info">
                                        <span class="security-status-title" id="security-status-title">Tu cuenta esta protegida</span>
                                        <div class="security-score-bar">
                                            <div class="security-score-fill" id="security-score-fill" style="width: 0%"></div>
                                        </div>
                                        <span class="security-score-text" id="security-score-text">Nivel: --</span>
                                    </div>
                                </div>
                                <div class="security-indicators">
                                    <div class="security-indicator" id="indicator-wallet">
                                        <span class="indicator-icon">üí≥</span>
                                        <span class="indicator-text">Wallet</span>
                                        <span class="indicator-status pending">--</span>
                                    </div>
                                    <div class="security-indicator" id="indicator-2fa">
                                        <span class="indicator-icon">üîê</span>
                                        <span class="indicator-text">2FA</span>
                                        <span class="indicator-status pending">--</span>
                                    </div>
                                    <div class="security-indicator" id="indicator-devices">
                                        <span class="indicator-icon">üì±</span>
                                        <span class="indicator-text">Dispositivos</span>
                                        <span class="indicator-status pending">0/2</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Gestion de Dispositivos -->
                            <div class="devices-management">
                                <div class="devices-header">
                                    <h4 class="devices-title">Dispositivos de Confianza</h4>
                                    <button class="add-device-btn" id="add-device-btn">+ Agregar</button>
                                </div>
                                <div class="devices-list" id="trusted-devices-list">
                                    <div class="devices-loading">Cargando dispositivos...</div>
                                </div>
                                <button class="logout-all-btn" id="logout-all-devices-btn">
                                    Cerrar sesion en todos los dispositivos
                                </button>
                            </div>
                            
                            <!-- Wallet de Respaldo -->
                            <div class="backup-wallet-section">
                                <div class="backup-wallet-header">
                                    <h4 class="backup-wallet-title">Wallet de Respaldo</h4>
                                    <span class="backup-wallet-badge" id="backup-wallet-badge">No configurada</span>
                                </div>
                                <p class="backup-wallet-desc">Registra una wallet secundaria para recuperar tu cuenta en caso de emergencia.</p>
                                <button class="backup-wallet-btn" id="setup-backup-wallet-btn">Configurar Wallet de Respaldo</button>
                            </div>
                            
                            <!-- Historial de Actividad -->
                            <div class="activity-history-section">
                                <div class="activity-header">
                                    <h4 class="activity-title">Actividad de Seguridad</h4>
                                    <button class="see-all-btn" id="see-all-activity-btn">Ver todo</button>
                                </div>
                                <div class="activity-list" id="security-activity-list">
                                    <div class="activity-loading">Cargando actividad...</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- PAGINA CONFIGURACION -->
            <div id="settings-screen" class="page-screen hidden" role="region" aria-label="Configuracion">
                <div class="page-header settings-header">
                    <button class="back-btn" id="settings-back-btn" aria-label="Volver al inicio">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="24" height="24" aria-hidden="true">
                            <polyline points="15 18 9 12 15 6"></polyline>
                        </svg>
                    </button>
                    <h1 class="page-title">Configuracion</h1>
                </div>
                <div class="settings-content">
                    <!-- Seccion de Cuenta -->
                    <div class="settings-section">
                        <h3 class="settings-section-title">Mi Cuenta</h3>
                        <div class="settings-list">
                            <div class="settings-item">
                                <span class="settings-icon">üë§</span>
                                <div class="settings-item-info">
                                    <span class="settings-item-title">Perfil</span>
                                    <span class="settings-item-desc">Edita tu informacion personal</span>
                                </div>
                                <span class="settings-arrow">‚Ä∫</span>
                            </div>
                            <div class="settings-item">
                                <span class="settings-icon">üîî</span>
                                <div class="settings-item-info">
                                    <span class="settings-item-title">Notificaciones</span>
                                    <span class="settings-item-desc">Configura tus alertas</span>
                                </div>
                                <span class="settings-arrow">‚Ä∫</span>
                            </div>
                        </div>
                    </div>

                    <!-- Seccion de Seguridad -->
                    <div class="settings-section">
                        <h3 class="settings-section-title">Seguridad</h3>
                        
                        <!-- Estado de Seguridad -->
                        <div class="security-status-card" id="settings-security-card">
                            <div class="security-card-header">
                                <div class="security-card-icon" id="settings-security-icon">üõ°Ô∏è</div>
                                <div class="security-card-info">
                                    <span class="security-card-title" id="settings-security-title">Estado de Seguridad</span>
                                    <span class="security-card-level" id="settings-security-level">Nivel: --</span>
                                </div>
                                <div class="security-score-circle" id="settings-security-score">
                                    <span>0%</span>
                                </div>
                            </div>
                            <div class="security-quick-status">
                                <div class="quick-status-item">
                                    <span class="status-dot" id="settings-wallet-dot"></span>
                                    <span>Wallet</span>
                                </div>
                                <div class="quick-status-item">
                                    <span class="status-dot" id="settings-2fa-dot"></span>
                                    <span>2FA</span>
                                </div>
                                <div class="quick-status-item">
                                    <span class="status-dot" id="settings-devices-dot"></span>
                                    <span>Dispositivos</span>
                                </div>
                            </div>
                        </div>

                        <!-- Dispositivos de Confianza -->
                        <div class="settings-devices-section">
                            <div class="settings-devices-header">
                                <div class="devices-title-row">
                                    <span class="settings-icon">üì±</span>
                                    <div class="devices-title-info">
                                        <span class="settings-item-title">Dispositivos de Confianza</span>
                                        <span class="devices-count" id="settings-devices-count">0/2 dispositivos</span>
                                    </div>
                                </div>
                                <button class="add-device-small-btn" id="settings-add-device-btn">+ Agregar</button>
                            </div>
                            <div class="settings-devices-list" id="settings-devices-list">
                                <div class="devices-loading">Cargando dispositivos...</div>
                            </div>
                        </div>

                        <!-- Opciones de Seguridad -->
                        <div class="settings-list">
                            <div class="settings-item" id="settings-2fa-item">
                                <span class="settings-icon">üîê</span>
                                <div class="settings-item-info">
                                    <span class="settings-item-title">Autenticacion 2FA</span>
                                    <span class="settings-item-desc" id="settings-2fa-status">Estado: --</span>
                                </div>
                                <span class="settings-arrow">‚Ä∫</span>
                            </div>
                            <div class="settings-item" id="settings-backup-wallet-item">
                                <span class="settings-icon">üí≥</span>
                                <div class="settings-item-info">
                                    <span class="settings-item-title">Wallet de Respaldo</span>
                                    <span class="settings-item-desc" id="settings-backup-status">No configurada</span>
                                </div>
                                <span class="settings-arrow">‚Ä∫</span>
                            </div>
                            <div class="settings-item" id="settings-activity-item">
                                <span class="settings-icon">üìã</span>
                                <div class="settings-item-info">
                                    <span class="settings-item-title">Historial de Actividad</span>
                                    <span class="settings-item-desc">Ver actividad de seguridad</span>
                                </div>
                                <span class="settings-arrow">‚Ä∫</span>
                            </div>
                        </div>
                    </div>

                    <!-- Seccion de Aplicacion -->
                    <div class="settings-section">
                        <h3 class="settings-section-title">Aplicacion</h3>
                        <div class="settings-list">
                            <div class="settings-item">
                                <span class="settings-icon">üåô</span>
                                <div class="settings-item-info">
                                    <span class="settings-item-title">Tema</span>
                                    <span class="settings-item-desc">Modo oscuro</span>
                                </div>
                                <div class="settings-toggle active">
                                    <span class="toggle-slider"></span>
                                </div>
                            </div>
                            <div class="settings-item">
                                <span class="settings-icon">üåê</span>
                                <div class="settings-item-info">
                                    <span class="settings-item-title">Idioma</span>
                                    <span class="settings-item-desc">Espanol</span>
                                </div>
                                <span class="settings-arrow">‚Ä∫</span>
                            </div>
                        </div>
                    </div>

                    <!-- Cerrar Sesion -->
                    <div class="settings-section">
                        <button class="settings-logout-btn" id="settings-logout-btn">
                            <span class="logout-icon">üö™</span>
                            Cerrar todas las sesiones
                        </button>
                    </div>

                    <div class="settings-footer">
                        <span class="settings-version">BUNK3R v1.0.0</span>
                    </div>
                </div>
            </div>

            <!-- PAGINA ADMINISTRACION (Solo Owner) -->
            <div id="admin-screen" class="page-screen hidden" role="region" aria-label="Panel de Administracion">
                <div class="page-header admin-header">
                    <button class="back-btn" id="admin-back-btn" aria-label="Volver al inicio">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="24" height="24" aria-hidden="true">
                            <polyline points="15 18 9 12 15 6"></polyline>
                        </svg>
                    </button>
                    <h1 class="page-title">Panel de Administracion</h1>
                </div>
                <div class="admin-content">
                    <!-- Stats Rapidas -->
                    <div class="admin-stats-grid">
                        <div class="admin-stat-card">
                            <span class="admin-stat-icon">üë•</span>
                            <span class="admin-stat-value" id="admin-total-users">0</span>
                            <span class="admin-stat-label">Usuarios</span>
                        </div>
                        <div class="admin-stat-card">
                            <span class="admin-stat-icon">ü§ñ</span>
                            <span class="admin-stat-value" id="admin-total-bots">0</span>
                            <span class="admin-stat-label">Bots Activos</span>
                        </div>
                        <div class="admin-stat-card">
                            <span class="admin-stat-icon">üí∞</span>
                            <span class="admin-stat-value" id="admin-total-transactions">0</span>
                            <span class="admin-stat-label">Transacciones</span>
                        </div>
                        <div class="admin-stat-card">
                            <span class="admin-stat-icon">‚ö†Ô∏è</span>
                            <span class="admin-stat-value" id="admin-security-alerts">0</span>
                            <span class="admin-stat-label">Alertas</span>
                        </div>
                    </div>

                    <!-- Menu de Administracion -->
                    <div class="admin-section">
                        <h3 class="admin-section-title">Gestion</h3>
                        <div class="admin-menu-list">
                            <div class="admin-menu-item" id="admin-users-btn">
                                <span class="admin-menu-icon">üë•</span>
                                <div class="admin-menu-info">
                                    <span class="admin-menu-title">Gestion de Usuarios</span>
                                    <span class="admin-menu-desc">Ver y administrar usuarios</span>
                                </div>
                                <span class="admin-menu-arrow">‚Ä∫</span>
                            </div>
                            <div class="admin-menu-item" id="admin-bots-btn">
                                <span class="admin-menu-icon">ü§ñ</span>
                                <div class="admin-menu-info">
                                    <span class="admin-menu-title">Gestion de Bots</span>
                                    <span class="admin-menu-desc">Administrar bots del sistema</span>
                                </div>
                                <span class="admin-menu-arrow">‚Ä∫</span>
                            </div>
                            <div class="admin-menu-item" id="admin-products-btn">
                                <span class="admin-menu-icon">üõí</span>
                                <div class="admin-menu-info">
                                    <span class="admin-menu-title">Productos</span>
                                    <span class="admin-menu-desc">Marketplace y productos</span>
                                </div>
                                <span class="admin-menu-arrow">‚Ä∫</span>
                            </div>
                            <div class="admin-menu-item" id="admin-transactions-btn">
                                <span class="admin-menu-icon">üí≥</span>
                                <div class="admin-menu-info">
                                    <span class="admin-menu-title">Transacciones</span>
                                    <span class="admin-menu-desc">Historial de transacciones</span>
                                </div>
                                <span class="admin-menu-arrow">‚Ä∫</span>
                            </div>
                        </div>
                    </div>

                    <!-- Seccion de Seguridad -->
                    <div class="admin-section">
                        <h3 class="admin-section-title">Seguridad</h3>
                        <div class="admin-menu-list">
                            <div class="admin-menu-item" id="admin-security-alerts-btn">
                                <span class="admin-menu-icon">üö®</span>
                                <div class="admin-menu-info">
                                    <span class="admin-menu-title">Alertas de Seguridad</span>
                                    <span class="admin-menu-desc">Revisar alertas activas</span>
                                </div>
                                <span class="admin-alert-badge hidden" id="admin-alert-badge">0</span>
                                <span class="admin-menu-arrow">‚Ä∫</span>
                            </div>
                            <div class="admin-menu-item" id="admin-activity-btn">
                                <span class="admin-menu-icon">üìä</span>
                                <div class="admin-menu-info">
                                    <span class="admin-menu-title">Registro de Actividad</span>
                                    <span class="admin-menu-desc">Ver todas las actividades</span>
                                </div>
                                <span class="admin-menu-arrow">‚Ä∫</span>
                            </div>
                            <div class="admin-menu-item" id="admin-lockouts-btn">
                                <span class="admin-menu-icon">üîí</span>
                                <div class="admin-menu-info">
                                    <span class="admin-menu-title">Usuarios Bloqueados</span>
                                    <span class="admin-menu-desc">Gestionar bloqueos</span>
                                </div>
                                <span class="admin-menu-arrow">‚Ä∫</span>
                            </div>
                        </div>
                    </div>

                    <!-- Seccion de Sistema -->
                    <div class="admin-section">
                        <h3 class="admin-section-title">Sistema</h3>
                        <div class="admin-menu-list">
                            <div class="admin-menu-item" id="admin-settings-btn">
                                <span class="admin-menu-icon">‚öôÔ∏è</span>
                                <div class="admin-menu-info">
                                    <span class="admin-menu-title">Configuracion del Sistema</span>
                                    <span class="admin-menu-desc">Ajustes generales</span>
                                </div>
                                <span class="admin-menu-arrow">‚Ä∫</span>
                            </div>
                            <div class="admin-menu-item" id="admin-logs-btn">
                                <span class="admin-menu-icon">üìù</span>
                                <div class="admin-menu-info">
                                    <span class="admin-menu-title">Logs del Sistema</span>
                                    <span class="admin-menu-desc">Ver registros del servidor</span>
                                </div>
                                <span class="admin-menu-arrow">‚Ä∫</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SECCION TRACKINGS CORREOS -->
            <div id="tracking-module" class="module-screen hidden">
                <header class="header">
                    <div class="header-content">
                        <button type="button" class="btn-home" id="btn-go-home">
                            <span>‚Üê</span>
                        </button>
                        <h1 class="app-title">üì¶ Trackings Correos</h1>
                        <div class="user-info">
                            <span id="user-name"></span>
                        </div>
                    </div>
                </header>

                <nav class="nav-tabs">
                    <button class="nav-tab active" data-section="dashboard">
                        <span class="tab-icon">üìä</span>
                        <span class="tab-text">Panel</span>
                    </button>
                    <button class="nav-tab" data-section="trackings">
                        <span class="tab-icon">üì¶</span>
                        <span class="tab-text">Trackings</span>
                    </button>
                    <button class="nav-tab" data-section="create">
                        <span class="tab-icon">‚ûï</span>
                        <span class="tab-text">Crear</span>
                    </button>
                    <button class="nav-tab" data-section="search">
                        <span class="tab-icon">üîç</span>
                        <span class="tab-text">Buscar</span>
                    </button>
                </nav>

            <main class="main-content">
                <section id="section-dashboard" class="section active">
                    <div class="stats-grid">
                        <div class="stat-card" data-status="RETENIDO">
                            <div class="stat-icon">üì¶</div>
                            <div class="stat-value" id="stat-retenido">0</div>
                            <div class="stat-label">Retenidos</div>
                        </div>
                        <div class="stat-card" data-status="EN_TRANSITO">
                            <div class="stat-icon">üöö</div>
                            <div class="stat-value" id="stat-transito">0</div>
                            <div class="stat-label">En Camino</div>
                        </div>
                        <div class="stat-card" data-status="ENTREGADO">
                            <div class="stat-icon">‚úÖ</div>
                            <div class="stat-value" id="stat-entregado">0</div>
                            <div class="stat-label">Entregados</div>
                        </div>
                        <div class="stat-card" data-status="CONFIRMAR_PAGO">
                            <div class="stat-icon">üí∞</div>
                            <div class="stat-value" id="stat-pago">0</div>
                            <div class="stat-label">Confirmar Pago</div>
                        </div>
                    </div>
                    <div class="total-stat">
                        <span class="total-label">Total de Trackings:</span>
                        <span class="total-value" id="stat-total">0</span>
                    </div>
                </section>

                <section id="section-trackings" class="section hidden">
                    <div class="filter-bar">
                        <select id="status-filter" class="filter-select">
                            <option value="">Todos los estados</option>
                            <option value="RETENIDO">üì¶ Retenidos</option>
                            <option value="EN_TRANSITO">üöö En Camino</option>
                            <option value="ENTREGADO">‚úÖ Entregados</option>
                            <option value="CONFIRMAR_PAGO">üí∞ Confirmar Pago</option>
                        </select>
                    </div>
                    <div id="trackings-list" class="trackings-list">
                    </div>
                </section>

                <section id="section-create" class="section hidden">
                    <form id="create-form" class="tracking-form">
                        <h2 class="form-title">Crear Nuevo Tracking</h2>
                        
                        <div class="form-group">
                            <label for="tracking-id">ID de Tracking *</label>
                            <input type="text" id="tracking-id" name="trackingId" required placeholder="Ej: ES123456789">
                        </div>
                        
                        <div class="form-group">
                            <label for="recipient-name">Nombre del Destinatario *</label>
                            <input type="text" id="recipient-name" name="recipientName" required placeholder="Nombre completo">
                        </div>
                        
                        <div class="form-group">
                            <label for="product-name">Nombre del Producto *</label>
                            <input type="text" id="product-name" name="productName" required placeholder="Descripci√≥n del producto">
                        </div>
                        
                        <div class="form-group">
                            <label for="product-price">Precio del Producto</label>
                            <input type="text" id="product-price" name="productPrice" placeholder="Ej: 99.99">
                        </div>
                        
                        <div class="form-group">
                            <label for="delivery-address">Direcci√≥n de Entrega</label>
                            <textarea id="delivery-address" name="deliveryAddress" placeholder="Calle, n√∫mero, ciudad..."></textarea>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group half">
                                <label for="recipient-postal">C√≥digo Postal</label>
                                <input type="text" id="recipient-postal" name="recipientPostalCode" placeholder="28001">
                            </div>
                            <div class="form-group half">
                                <label for="recipient-province">Provincia</label>
                                <input type="text" id="recipient-province" name="recipientProvince" placeholder="Madrid">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="recipient-country">Pa√≠s Destino</label>
                            <input type="text" id="recipient-country" name="recipientCountry" placeholder="Espa√±a" value="Espa√±a">
                        </div>
                        
                        <div class="form-divider">
                            <span>Datos del Remitente</span>
                        </div>
                        
                        <div class="form-group">
                            <label for="sender-address">Direcci√≥n del Remitente</label>
                            <textarea id="sender-address" name="senderAddress" placeholder="Direcci√≥n de origen"></textarea>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group half">
                                <label for="sender-postal">C√≥digo Postal</label>
                                <input type="text" id="sender-postal" name="senderPostalCode" placeholder="08001">
                            </div>
                            <div class="form-group half">
                                <label for="sender-province">Provincia</label>
                                <input type="text" id="sender-province" name="senderProvince" placeholder="Barcelona">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="sender-country">Pa√≠s Origen</label>
                            <input type="text" id="sender-country" name="senderCountry" placeholder="Espa√±a" value="Espa√±a">
                        </div>
                        
                        <div class="form-divider">
                            <span>Detalles Adicionales</span>
                        </div>
                        
                        <div class="form-group">
                            <label for="package-weight">Peso del Paquete</label>
                            <input type="text" id="package-weight" name="packageWeight" placeholder="Ej: 1.5 kg" value="0.5 kg">
                        </div>
                        
                        <div class="form-group">
                            <label for="initial-status">Estado Inicial</label>
                            <select id="initial-status" name="status">
                                <option value="RETENIDO">üì¶ Retenido</option>
                                <option value="EN_TRANSITO">üöö En Camino</option>
                                <option value="CONFIRMAR_PAGO">üí∞ Confirmar Pago</option>
                                <option value="ENTREGADO">‚úÖ Entregado</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="estimated-delivery">Fecha Estimada de Entrega</label>
                            <input type="date" id="estimated-delivery" name="estimatedDelivery">
                        </div>
                        
                        <button type="submit" class="btn btn-primary btn-full">
                            <span>‚ûï</span> Crear Tracking
                        </button>
                    </form>
                </section>

                <section id="section-search" class="section hidden">
                    <div class="search-container">
                        <div class="search-box">
                            <input type="text" id="search-input" placeholder="Buscar por ID, cliente o producto..." autocomplete="off">
                            <button type="button" id="search-btn" class="btn btn-primary">
                                <span>üîç</span>
                            </button>
                        </div>
                    </div>
                    <div id="search-results" class="trackings-list">
                        <div class="empty-state">
                            <div class="empty-icon">üîç</div>
                            <p>Escribe para buscar trackings</p>
                        </div>
                    </div>
                </section>

                <section id="section-detail" class="section hidden">
                    <div class="detail-header">
                        <button type="button" class="btn-back" id="btn-back">
                            <span>‚Üê</span> Volver
                        </button>
                    </div>
                    <div id="tracking-detail" class="tracking-detail">
                    </div>
                </section>
            </main>
            </div>
            <!-- FIN TRACKING MODULE -->
        </div>
    </div>

    <!-- MODALES DE ADMINISTRACION -->
    
    <!-- Modal Gestion de Usuarios -->
    <div id="admin-users-modal" class="admin-modal-overlay hidden" role="dialog" aria-modal="true" aria-labelledby="admin-users-title">
        <div class="admin-modal">
            <div class="admin-modal-header">
                <button class="admin-modal-back" onclick="App.closeAdminModal('users')" aria-label="Volver">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="24" height="24" aria-hidden="true">
                        <polyline points="15 18 9 12 15 6"></polyline>
                    </svg>
                </button>
                <h2 id="admin-users-title">Gestion de Usuarios</h2>
                <span class="admin-modal-count" id="admin-users-count">0</span>
            </div>
            <div class="admin-modal-search">
                <input type="text" id="admin-users-search" placeholder="Buscar usuario...">
            </div>
            <div class="admin-modal-content" id="admin-users-list">
                <div class="admin-loading">Cargando usuarios...</div>
            </div>
        </div>
    </div>

    <!-- Modal Gestion de Bots -->
    <div id="admin-bots-modal" class="admin-modal-overlay hidden" role="dialog" aria-modal="true" aria-labelledby="admin-bots-title">
        <div class="admin-modal">
            <div class="admin-modal-header">
                <button class="admin-modal-back" onclick="App.closeAdminModal('bots')" aria-label="Volver">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="24" height="24" aria-hidden="true">
                        <polyline points="15 18 9 12 15 6"></polyline>
                    </svg>
                </button>
                <h2 id="admin-bots-title">Gestion de Bots</h2>
                <button class="admin-add-btn" onclick="App.showAddBotForm()">+ Nuevo</button>
            </div>
            <div class="admin-modal-content" id="admin-bots-list">
                <div class="admin-loading">Cargando bots...</div>
            </div>
        </div>
    </div>

    <!-- Modal Productos -->
    <div id="admin-products-modal" class="admin-modal-overlay hidden" role="dialog" aria-modal="true" aria-labelledby="admin-products-title">
        <div class="admin-modal">
            <div class="admin-modal-header">
                <button class="admin-modal-back" onclick="App.closeAdminModal('products')" aria-label="Volver">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="24" height="24" aria-hidden="true">
                        <polyline points="15 18 9 12 15 6"></polyline>
                    </svg>
                </button>
                <h2 id="admin-products-title">Productos</h2>
                <button class="admin-add-btn" onclick="App.showAddProductForm()">+ Nuevo</button>
            </div>
            <div class="admin-modal-tabs">
                <button class="admin-tab active" data-tab="all">Todos</button>
                <button class="admin-tab" data-tab="active">Activos</button>
                <button class="admin-tab" data-tab="inactive">Inactivos</button>
            </div>
            <div class="admin-modal-content" id="admin-products-list">
                <div class="admin-loading">Cargando productos...</div>
            </div>
        </div>
    </div>

    <!-- Modal Transacciones -->
    <div id="admin-transactions-modal" class="admin-modal-overlay hidden" role="dialog" aria-modal="true" aria-labelledby="admin-transactions-title">
        <div class="admin-modal">
            <div class="admin-modal-header">
                <button class="admin-modal-back" onclick="App.closeAdminModal('transactions')" aria-label="Volver">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="24" height="24" aria-hidden="true">
                        <polyline points="15 18 9 12 15 6"></polyline>
                    </svg>
                </button>
                <h2 id="admin-transactions-title">Transacciones</h2>
                <span class="admin-modal-count" id="admin-transactions-count">0</span>
            </div>
            <div class="admin-modal-filters">
                <select id="admin-tx-filter">
                    <option value="all">Todas</option>
                    <option value="deposit">Depositos</option>
                    <option value="withdrawal">Retiros</option>
                    <option value="purchase">Compras</option>
                </select>
                <select id="admin-tx-period">
                    <option value="today">Hoy</option>
                    <option value="week">Esta semana</option>
                    <option value="month">Este mes</option>
                    <option value="all">Todo</option>
                </select>
            </div>
            <div class="admin-tx-summary" id="admin-tx-summary">
                <div class="tx-summary-item">
                    <span class="tx-summary-label">Total Depositos</span>
                    <span class="tx-summary-value" id="tx-total-deposits">0 TON</span>
                </div>
                <div class="tx-summary-item">
                    <span class="tx-summary-label">Total Retiros</span>
                    <span class="tx-summary-value" id="tx-total-withdrawals">0 TON</span>
                </div>
            </div>
            <div class="admin-modal-content" id="admin-transactions-list">
                <div class="admin-loading">Cargando transacciones...</div>
            </div>
        </div>
    </div>

    <!-- Modal Alertas de Seguridad -->
    <div id="admin-alerts-modal" class="admin-modal-overlay hidden" role="dialog" aria-modal="true" aria-labelledby="admin-alerts-title">
        <div class="admin-modal">
            <div class="admin-modal-header">
                <button class="admin-modal-back" onclick="App.closeAdminModal('alerts')" aria-label="Volver">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="24" height="24" aria-hidden="true">
                        <polyline points="15 18 9 12 15 6"></polyline>
                    </svg>
                </button>
                <h2 id="admin-alerts-title">Alertas de Seguridad</h2>
                <span class="admin-alert-count" id="admin-alerts-count">0</span>
            </div>
            <div class="admin-modal-tabs">
                <button class="admin-tab active" data-tab="pending">Pendientes</button>
                <button class="admin-tab" data-tab="resolved">Resueltas</button>
            </div>
            <div class="admin-modal-content" id="admin-alerts-list">
                <div class="admin-loading">Cargando alertas...</div>
            </div>
        </div>
    </div>

    <!-- Modal Registro de Actividad -->
    <div id="admin-activity-modal" class="admin-modal-overlay hidden">
        <div class="admin-modal">
            <div class="admin-modal-header">
                <button class="admin-modal-back" onclick="App.closeAdminModal('activity')">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="24" height="24">
                        <polyline points="15 18 9 12 15 6"></polyline>
                    </svg>
                </button>
                <h2>Registro de Actividad</h2>
            </div>
            <div class="admin-modal-filters">
                <select id="admin-activity-type">
                    <option value="all">Todas</option>
                    <option value="login">Inicios de sesion</option>
                    <option value="wallet">Wallet</option>
                    <option value="security">Seguridad</option>
                    <option value="transaction">Transacciones</option>
                </select>
            </div>
            <div class="admin-modal-content" id="admin-activity-list">
                <div class="admin-loading">Cargando actividad...</div>
            </div>
        </div>
    </div>

    <!-- Modal Usuarios Bloqueados -->
    <div id="admin-lockouts-modal" class="admin-modal-overlay hidden">
        <div class="admin-modal">
            <div class="admin-modal-header">
                <button class="admin-modal-back" onclick="App.closeAdminModal('lockouts')">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="24" height="24">
                        <polyline points="15 18 9 12 15 6"></polyline>
                    </svg>
                </button>
                <h2>Usuarios Bloqueados</h2>
                <span class="admin-modal-count" id="admin-lockouts-count">0</span>
            </div>
            <div class="admin-modal-content" id="admin-lockouts-list">
                <div class="admin-loading">Cargando usuarios bloqueados...</div>
            </div>
        </div>
    </div>

    <!-- Modal Configuracion del Sistema -->
    <div id="admin-settings-modal" class="admin-modal-overlay hidden">
        <div class="admin-modal">
            <div class="admin-modal-header">
                <button class="admin-modal-back" onclick="App.closeAdminModal('settings')">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="24" height="24">
                        <polyline points="15 18 9 12 15 6"></polyline>
                    </svg>
                </button>
                <h2>Configuracion del Sistema</h2>
            </div>
            <div class="admin-modal-content" id="admin-settings-content">
                <div class="admin-settings-section">
                    <h3>General</h3>
                    <div class="admin-setting-item">
                        <div class="setting-info">
                            <span class="setting-label">Modo Mantenimiento</span>
                            <span class="setting-desc">Desactivar acceso de usuarios</span>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="setting-maintenance">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="admin-setting-item">
                        <div class="setting-info">
                            <span class="setting-label">Registro Abierto</span>
                            <span class="setting-desc">Permitir nuevos usuarios</span>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="setting-registration" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>
                <div class="admin-settings-section">
                    <h3>Wallet</h3>
                    <div class="admin-setting-item">
                        <div class="setting-info">
                            <span class="setting-label">Wallet Merchant</span>
                            <span class="setting-value" id="setting-wallet-address">Cargando...</span>
                        </div>
                        <button class="btn-copy" onclick="App.copyWalletAddress()">Copiar</button>
                    </div>
                    <div class="admin-setting-item">
                        <div class="setting-info">
                            <span class="setting-label">Min. Deposito</span>
                            <span class="setting-desc">Monto minimo en TON</span>
                        </div>
                        <input type="number" id="setting-min-deposit" value="1" min="0.1" step="0.1" class="setting-input">
                    </div>
                </div>
                <div class="admin-settings-section">
                    <h3>Notificaciones</h3>
                    <div class="admin-setting-item">
                        <div class="setting-info">
                            <span class="setting-label">Alertas Email</span>
                            <span class="setting-desc">Recibir alertas por email</span>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="setting-email-alerts" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="admin-setting-item">
                        <div class="setting-info">
                            <span class="setting-label">Alertas Telegram</span>
                            <span class="setting-desc">Recibir alertas en Telegram</span>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="setting-telegram-alerts" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>
                <button class="admin-save-btn" onclick="App.saveSystemSettings()">Guardar Cambios</button>
            </div>
        </div>
    </div>

    <!-- Modal Logs del Sistema -->
    <div id="admin-logs-modal" class="admin-modal-overlay hidden">
        <div class="admin-modal">
            <div class="admin-modal-header">
                <button class="admin-modal-back" onclick="App.closeAdminModal('logs')">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="24" height="24">
                        <polyline points="15 18 9 12 15 6"></polyline>
                    </svg>
                </button>
                <h2>Logs del Sistema</h2>
                <button class="admin-refresh-btn" onclick="App.loadSystemLogs()">Actualizar</button>
            </div>
            <div class="admin-modal-filters">
                <select id="admin-logs-level">
                    <option value="all">Todos</option>
                    <option value="error">Errores</option>
                    <option value="warning">Advertencias</option>
                    <option value="info">Info</option>
                </select>
            </div>
            <div class="admin-modal-content admin-logs-content" id="admin-logs-list">
                <div class="admin-loading">Cargando logs...</div>
            </div>
        </div>
    </div>

    <!-- Modal Detalle de Usuario -->
    <div id="admin-user-detail-modal" class="admin-modal-overlay hidden">
        <div class="admin-modal">
            <div class="admin-modal-header">
                <button class="admin-modal-back" onclick="App.closeAdminModal('user-detail')">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="24" height="24">
                        <polyline points="15 18 9 12 15 6"></polyline>
                    </svg>
                </button>
                <h2>Detalle de Usuario</h2>
            </div>
            <div class="admin-modal-content" id="admin-user-detail-content">
                <div class="admin-loading">Cargando...</div>
            </div>
        </div>
    </div>

    <div id="modal-overlay" class="modal-overlay hidden" aria-hidden="true">
        <div id="modal-content" class="modal-content" role="dialog" aria-modal="true">
        </div>
    </div>

    <div id="toast-container" class="toast-container" role="region" aria-label="Notificaciones" aria-live="polite"></div>

    <!-- MODALES SISTEMA PUBLICACIONES -->
    <!-- Modal Crear Publicacion -->
    <div id="create-post-modal" class="pub-modal-overlay hidden" role="dialog" aria-modal="true" aria-labelledby="create-post-title">
        <div class="pub-modal create-post-modal">
            <div class="pub-modal-header">
                <button class="pub-modal-close" onclick="Publications.closeCreateModal()" aria-label="Cerrar modal">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="24" height="24">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
                <h2 id="create-post-title">Crear publicacion</h2>
                <button class="pub-modal-action" onclick="Publications.submitPost()">Publicar</button>
            </div>
            <div class="pub-modal-content">
                <div class="create-post-media-section">
                    <div class="media-upload-area" id="media-upload-area">
                        <input type="file" id="media-input" multiple accept="image/*,video/*" class="hidden">
                        <div class="media-upload-placeholder" id="media-placeholder">
                            <div class="upload-icon">üì∑</div>
                            <p>Arrastra fotos y videos aqui</p>
                            <span class="upload-hint">o haz clic para seleccionar</span>
                        </div>
                        <div class="media-preview-carousel hidden" id="media-preview">
                            <div class="carousel-items" id="carousel-items"></div>
                            <div class="carousel-indicators" id="carousel-indicators"></div>
                            <button class="carousel-nav prev hidden" id="carousel-prev"><</button>
                            <button class="carousel-nav next hidden" id="carousel-next">></button>
                            <button class="add-more-media" id="add-more-media">+ Agregar mas</button>
                        </div>
                    </div>
                </div>
                <div class="create-post-form">
                    <textarea id="post-caption" class="post-caption-input" placeholder="Escribe un pie de foto..." maxlength="10000"></textarea>
                    <div class="caption-counter"><span id="caption-count">0</span>/10000</div>
                    <div class="post-options">
                        <div class="post-option">
                            <span class="option-icon">üìç</span>
                            <input type="text" class="option-input" id="post-location" placeholder="Agregar ubicacion">
                        </div>
                        <div class="post-option">
                            <span class="option-icon">üë•</span>
                            <input type="text" class="option-input" id="post-mentions" placeholder="Etiquetar personas (@usuario)">
                        </div>
                        <div class="post-option">
                            <span class="option-icon">#</span>
                            <input type="text" class="option-input" id="post-hashtags" placeholder="Hashtags (#tema)">
                        </div>
                    </div>
                </div>
            </div>
            <div class="pub-modal-footer">
                <div class="upload-progress hidden" id="upload-progress">
                    <div class="progress-bar"><div class="progress-fill" id="progress-fill"></div></div>
                    <span class="progress-text" id="progress-text">Encriptando y subiendo...</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Ver Publicacion -->
    <div id="view-post-modal" class="pub-modal-overlay hidden" role="dialog" aria-modal="true" aria-labelledby="view-post-title">
        <div class="pub-modal view-post-modal">
            <h2 id="view-post-title" class="sr-only">Ver publicacion</h2>
            <div class="pub-modal-header mobile-header">
                <button class="pub-modal-close" onclick="Publications.closeViewModal()" aria-label="Cerrar">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="24" height="24" aria-hidden="true">
                        <polyline points="15 18 9 12 15 6"></polyline>
                    </svg>
                </button>
                <div class="post-author-mini" id="post-author-mini"></div>
                <button class="post-options-btn" onclick="Publications.showPostOptions()">
                    <svg viewBox="0 0 24 24" fill="currentColor" width="24" height="24">
                        <circle cx="12" cy="12" r="1.5"></circle>
                        <circle cx="12" cy="6" r="1.5"></circle>
                        <circle cx="12" cy="18" r="1.5"></circle>
                    </svg>
                </button>
            </div>
            <div class="view-post-container">
                <div class="view-post-media" id="view-post-media">
                    <!-- Carousel de imagenes/video -->
                </div>
                <div class="view-post-sidebar">
                    <div class="post-header" id="post-header">
                        <!-- Info autor -->
                    </div>
                    <div class="post-comments-section" id="post-comments">
                        <!-- Comentarios -->
                    </div>
                    <div class="post-actions-bar" id="post-actions">
                        <!-- Acciones -->
                    </div>
                    <div class="post-info" id="post-info">
                        <!-- Likes y fecha -->
                    </div>
                    <div class="add-comment-section">
                        <div class="emoji-picker-btn" onclick="Publications.toggleEmojiPicker()">üòä</div>
                        <input type="text" class="comment-input" id="comment-input" placeholder="Agregar un comentario...">
                        <button class="send-comment-btn" onclick="Publications.submitComment()">Publicar</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Historias -->
    <div id="story-viewer-modal" class="story-viewer-overlay hidden" role="dialog" aria-modal="true" aria-label="Visor de historias">
        <div class="story-viewer">
            <div class="story-progress-bar" id="story-progress-bar" role="progressbar" aria-label="Progreso de la historia"></div>
            <div class="story-header">
                <div class="story-author" id="story-author"></div>
                <button class="story-close" onclick="Publications.closeStoryViewer()" aria-label="Cerrar visor de historias">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="24" height="24" aria-hidden="true">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
            </div>
            <div class="story-content" id="story-content">
                <!-- Contenido de la historia -->
            </div>
            <div class="story-navigation">
                <div class="story-nav-area story-prev" onclick="Publications.prevStory()"></div>
                <div class="story-nav-area story-next" onclick="Publications.nextStory()"></div>
            </div>
            <div class="story-footer hidden" id="story-footer">
                <input type="text" class="story-reply-input" placeholder="Enviar mensaje...">
                <div class="story-reactions">
                    <span onclick="Publications.reactToStory('‚ù§Ô∏è')">‚ù§Ô∏è</span>
                    <span onclick="Publications.reactToStory('üî•')">üî•</span>
                    <span onclick="Publications.reactToStory('üòç')">üòç</span>
                    <span onclick="Publications.reactToStory('üòÇ')">üòÇ</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Crear Historia -->
    <div id="create-story-modal" class="pub-modal-overlay hidden" role="dialog" aria-modal="true" aria-labelledby="create-story-title">
        <div class="pub-modal create-story-modal">
            <div class="pub-modal-header">
                <button class="pub-modal-close" onclick="Publications.closeStoryModal()" aria-label="Cerrar">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="24" height="24" aria-hidden="true">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
                <h2 id="create-story-title">Crear historia</h2>
                <button class="pub-modal-action" onclick="Publications.submitStory()">Compartir</button>
            </div>
            <div class="story-preview-area">
                <input type="file" id="story-media-input" accept="image/*,video/*" class="hidden">
                <div class="story-upload-placeholder" id="story-placeholder">
                    <div class="upload-icon">üì∑</div>
                    <p>Selecciona una foto o video</p>
                    <span class="upload-hint">Duracion maxima: 15 segundos</span>
                </div>
                <div class="story-preview hidden" id="story-preview"></div>
            </div>
        </div>
    </div>

    <!-- Modal Opciones de Publicacion -->
    <div id="post-options-modal" class="pub-modal-overlay hidden" role="dialog" aria-modal="true" aria-label="Opciones de publicacion">
        <div class="pub-modal options-modal">
            <div class="options-list" role="menu">
                <button class="option-item danger" onclick="Publications.reportPost()" role="menuitem">Reportar</button>
                <button class="option-item" onclick="Publications.sharePost()" role="menuitem">Compartir</button>
                <button class="option-item" onclick="Publications.copyLink()" role="menuitem">Copiar enlace</button>
                <button class="option-item edit-option hidden" onclick="Publications.editPost()" role="menuitem">Editar</button>
                <button class="option-item danger delete-option hidden" onclick="Publications.deletePost()" role="menuitem">Eliminar</button>
                <button class="option-item cancel" onclick="Publications.closeOptionsModal()" role="menuitem">Cancelar</button>
            </div>
        </div>
    </div>

    <!-- Modal Likes -->
    <div id="likes-modal" class="pub-modal-overlay hidden" role="dialog" aria-modal="true" aria-labelledby="likes-modal-title">
        <div class="pub-modal likes-modal">
            <div class="pub-modal-header">
                <button class="pub-modal-close" onclick="Publications.closeLikesModal()" aria-label="Cerrar">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="24" height="24" aria-hidden="true">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
                <h2 id="likes-modal-title">Me gusta</h2>
            </div>
            <div class="likes-list" id="likes-list" role="list" aria-label="Lista de usuarios que les gusta">
                <!-- Lista de usuarios que dieron like -->
            </div>
        </div>
    </div>

    <!-- Modal Reportar -->
    <div id="report-modal" class="pub-modal-overlay hidden" role="dialog" aria-modal="true" aria-labelledby="report-modal-title">
        <div class="pub-modal report-modal">
            <div class="pub-modal-header">
                <button class="pub-modal-close" onclick="Publications.closeReportModal()" aria-label="Cerrar">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="24" height="24" aria-hidden="true">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
                <h2 id="report-modal-title">Reportar publicacion</h2>
            </div>
            <div class="report-reasons">
                <button class="report-reason" data-reason="spam">Es spam</button>
                <button class="report-reason" data-reason="inappropriate">Contenido inapropiado</button>
                <button class="report-reason" data-reason="harassment">Acoso o bullying</button>
                <button class="report-reason" data-reason="violence">Violencia o amenazas</button>
                <button class="report-reason" data-reason="false_info">Informacion falsa</button>
                <button class="report-reason" data-reason="hate_speech">Discurso de odio</button>
                <button class="report-reason" data-reason="copyright">Infraccion de derechos</button>
                <button class="report-reason" data-reason="other">Otro motivo</button>
            </div>
        </div>
    </div>

    <!-- Modal Crear Publicacion -->
    <div id="create-publication-modal" class="pub-modal-overlay hidden" role="dialog" aria-modal="true" aria-labelledby="create-publication-title">
        <div class="pub-modal create-post-modal">
            <div class="pub-modal-header">
                <button class="pub-modal-close" onclick="PublicationsManager.hideCreateModal()" aria-label="Cerrar">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="24" height="24" aria-hidden="true">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
                <h2 id="create-publication-title">Nueva publicacion</h2>
                <button class="pub-modal-action" id="publish-btn">Publicar</button>
            </div>
            <div class="create-post-content">
                <!-- Selector de tipo de contenido -->
                <div class="content-type-selector">
                    <button class="content-type-btn active" data-type="media">
                        <span class="type-icon">üì∑</span>
                        <span>Foto/Video</span>
                    </button>
                    <button class="content-type-btn" data-type="text">
                        <span class="type-icon">‚úçÔ∏è</span>
                        <span>Solo Texto</span>
                    </button>
                </div>
                
                <!-- Area de subida de archivos -->
                <div class="file-upload-section" id="file-upload-section">
                    <div class="file-upload-area" id="file-upload-area">
                        <input type="file" id="publication-files" multiple accept="image/*,video/*" hidden>
                        <div class="upload-placeholder">
                            <span class="upload-icon">üì§</span>
                            <p>Toca para seleccionar</p>
                            <span class="upload-hint">Fotos o videos (max 10)</span>
                        </div>
                    </div>
                    <div class="media-preview-grid hidden" id="media-preview-grid">
                        <!-- Vista previa de archivos seleccionados -->
                    </div>
                </div>
                
                <!-- Campo de caption -->
                <div class="caption-section">
                    <textarea id="caption-input" class="caption-textarea" placeholder="Escribe una descripcion... usa @menciones y #hashtags" rows="4"></textarea>
                    <div class="caption-footer">
                        <span class="caption-counter" id="caption-counter">0 caracteres</span>
                    </div>
                </div>
                
                <!-- Barra de progreso de subida -->
                <div class="upload-progress hidden" id="upload-progress">
                    <div class="progress-bar">
                        <div class="progress-bar-fill" id="progress-bar-fill" style="width: 0%"></div>
                    </div>
                    <span class="progress-text" id="progress-text">Encriptando y subiendo...</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Seguidores/Seguidos -->
    <div id="followers-modal" class="pub-modal-overlay hidden" role="dialog" aria-modal="true" aria-labelledby="followers-modal-title">
        <div class="pub-modal followers-modal">
            <div class="pub-modal-header">
                <button class="pub-modal-close" onclick="App.hideFollowersModal()" aria-label="Cerrar">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="24" height="24" aria-hidden="true">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
                <h2 id="followers-modal-title">Seguidores</h2>
                <span></span>
            </div>
            <div class="followers-tabs">
                <button class="followers-tab active" data-type="followers" onclick="App.switchFollowersTab('followers')">Seguidores</button>
                <button class="followers-tab" data-type="following" onclick="App.switchFollowersTab('following')">Siguiendo</button>
            </div>
            <div class="followers-list" id="followers-list">
                <div class="followers-loading">
                    <div class="spinner"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Editar Perfil -->
    <div id="edit-profile-modal" class="pub-modal-overlay hidden" role="dialog" aria-modal="true" aria-labelledby="edit-profile-title">
        <div class="pub-modal edit-profile-modal">
            <div class="pub-modal-header">
                <button class="pub-modal-close" onclick="App.hideEditProfileModal()" aria-label="Cerrar">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="24" height="24" aria-hidden="true">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
                <h2 id="edit-profile-title">Editar perfil</h2>
                <button class="pub-modal-action" onclick="App.saveProfile()">Guardar</button>
            </div>
            <div class="edit-profile-content">
                <div class="edit-profile-avatar-section">
                    <div class="edit-profile-avatar" id="edit-profile-avatar">
                        <img class="edit-profile-avatar-img hidden" id="edit-profile-avatar-img" alt="Avatar">
                        <span class="edit-profile-avatar-initial" id="edit-profile-avatar-initial">U</span>
                    </div>
                    <button class="edit-avatar-btn" onclick="document.getElementById('avatar-input').click()">Cambiar foto</button>
                    <input type="file" id="avatar-input" accept="image/*" hidden onchange="App.handleAvatarSelect(event)">
                </div>
                <div class="edit-profile-field">
                    <label for="edit-profile-bio">Bio</label>
                    <textarea id="edit-profile-bio" class="edit-profile-textarea" placeholder="Escribe algo sobre ti..." rows="3" maxlength="150"></textarea>
                    <span class="edit-field-hint"><span id="bio-char-count">0</span>/150</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Configuracion de Notificaciones -->
    <div id="notification-settings-modal" class="pub-modal-overlay hidden" role="dialog" aria-modal="true" aria-labelledby="notif-settings-title">
        <div class="pub-modal notif-settings-modal">
            <div class="pub-modal-header">
                <button class="pub-modal-close" onclick="App.hideNotificationSettings()" aria-label="Cerrar">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="24" height="24" aria-hidden="true">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
                <h2 id="notif-settings-title">Configuracion de notificaciones</h2>
                <button class="pub-modal-action" id="save-notif-settings-btn" onclick="App.saveNotificationSettings()">Guardar</button>
            </div>
            <div class="notif-settings-content">
                <p class="notif-settings-desc">Elige que notificaciones quieres recibir</p>
                <div class="notif-setting-item">
                    <div class="notif-setting-info">
                        <span class="notif-setting-icon">‚ù§Ô∏è</span>
                        <div>
                            <span class="notif-setting-label">Reacciones</span>
                            <span class="notif-setting-hint">Cuando alguien reacciona a tus publicaciones</span>
                        </div>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="notif-pref-likes" checked>
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                <div class="notif-setting-item">
                    <div class="notif-setting-info">
                        <span class="notif-setting-icon">üí¨</span>
                        <div>
                            <span class="notif-setting-label">Comentarios</span>
                            <span class="notif-setting-hint">Comentarios y respuestas</span>
                        </div>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="notif-pref-comments" checked>
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                <div class="notif-setting-item">
                    <div class="notif-setting-info">
                        <span class="notif-setting-icon">üë§</span>
                        <div>
                            <span class="notif-setting-label">Nuevos seguidores</span>
                            <span class="notif-setting-hint">Cuando alguien te sigue</span>
                        </div>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="notif-pref-follows" checked>
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                <div class="notif-setting-item">
                    <div class="notif-setting-info">
                        <span class="notif-setting-icon">@</span>
                        <div>
                            <span class="notif-setting-label">Menciones</span>
                            <span class="notif-setting-hint">Cuando te mencionan en publicaciones</span>
                        </div>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="notif-pref-mentions" checked>
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                <div class="notif-setting-item">
                    <div class="notif-setting-info">
                        <span class="notif-setting-icon">üí∞</span>
                        <div>
                            <span class="notif-setting-label">Transacciones</span>
                            <span class="notif-setting-hint">Recargas y pagos de BUNK3RCO1N</span>
                        </div>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="notif-pref-transactions" checked>
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                <div class="notif-setting-item">
                    <div class="notif-setting-info">
                        <span class="notif-setting-icon">üìñ</span>
                        <div>
                            <span class="notif-setting-label">Historias</span>
                            <span class="notif-setting-hint">Respuestas y reacciones a tus historias</span>
                        </div>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="notif-pref-stories" checked>
                        <span class="toggle-slider"></span>
                    </label>
                </div>
            </div>
        </div>
    </div>

    <!-- Boton flotante crear publicacion -->
    <button class="fab-create-post" id="floating-create-btn" aria-label="Crear nueva publicacion">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" width="28" height="28" aria-hidden="true">
            <line x1="12" y1="5" x2="12" y2="19"></line>
            <line x1="5" y1="12" x2="19" y2="12"></line>
        </svg>
    </button>

    <!-- Stories Bar -->
    <div class="stories-bar hidden" id="stories-bar">
        <div class="story-item add-story" onclick="Publications.openStoryModal()">
            <div class="story-avatar-wrapper add">
                <div class="story-avatar" id="add-story-avatar">
                    <span class="story-add-icon">+</span>
                </div>
            </div>
            <span class="story-username">Tu historia</span>
        </div>
        <div class="stories-list" id="stories-list">
            <!-- Historias de otros usuarios -->
        </div>
    </div>

    <!-- BARRA DE NAVEGACION INFERIOR -->
    <nav class="bottom-nav hidden" id="bottom-nav" role="navigation" aria-label="Navegacion principal">
        <button class="bottom-nav-item active" data-nav="home" aria-label="Inicio" aria-current="page">
            <svg class="bottom-nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                <polyline points="9 22 9 12 15 12 15 22"></polyline>
            </svg>
            <span class="sr-only">Inicio</span>
        </button>
        <button class="bottom-nav-item" data-nav="marketplace" aria-label="Tienda">
            <svg class="bottom-nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path>
                <line x1="3" y1="6" x2="21" y2="6"></line>
                <path d="M16 10a4 4 0 0 1-8 0"></path>
            </svg>
            <span class="sr-only">Tienda</span>
        </button>
        <button class="bottom-nav-item" data-nav="bots" aria-label="Bots">
            <svg class="bottom-nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                <rect x="3" y="11" width="18" height="10" rx="2"></rect>
                <circle cx="12" cy="5" r="2"></circle>
                <path d="M12 7v4"></path>
                <line x1="8" y1="16" x2="8" y2="16"></line>
                <line x1="16" y1="16" x2="16" y2="16"></line>
            </svg>
            <span class="sr-only">Bots</span>
        </button>
        <button class="bottom-nav-item" data-nav="notifications" aria-label="Notificaciones" id="nav-notifications-btn">
            <div class="bottom-nav-icon-wrapper">
                <svg class="bottom-nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                    <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                    <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                </svg>
                <span class="notification-badge hidden" id="notification-badge" aria-label="Notificaciones no leidas">0</span>
            </div>
            <span class="sr-only">Notificaciones</span>
        </button>
        <button class="bottom-nav-item" data-nav="wallet" aria-label="Billetera">
            <svg class="bottom-nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                <rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect>
                <line x1="1" y1="10" x2="23" y2="10"></line>
            </svg>
            <span class="sr-only">Billetera</span>
        </button>
        <button class="bottom-nav-item" data-nav="profile" id="nav-profile-btn" aria-label="Mi perfil">
            <div class="bottom-nav-avatar" id="bottom-nav-avatar" aria-hidden="true"></div>
            <span class="sr-only">Mi perfil</span>
        </button>
    </nav>

    <script src="{{ url_for('static', filename='js/utils.js') }}"></script>
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
    <script src="{{ url_for('static', filename='js/publications.js') }}"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            App.init();
        });
    </script>
</body>
</html>
