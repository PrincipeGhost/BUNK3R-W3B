PROMPT - PROBLEMAS Y MEJORAS DETECTADOS EN BUNK3R
1. SISTEMA DE PUBLICACIONES (RED SOCIAL)
PROBLEMAS CRTICOS:

El feed NO se actualiza en tiempo real - hay que recargar la p谩gina para ver nuevas publicaciones, likes o comentarios
loadFeed() se llama despu茅s de cada acci贸n (publicar, eliminar, bloquear) causando recargas completas innecesarias en lugar de actualizar elementos individuales
No hay paginaci贸n infinita/scroll infinito implementado - el feed carga todo de una vez
Los posts eliminados requieren recarga manual del feed para desaparecer de la UI
Las reacciones/likes no muestran animaci贸n de feedback visual inmediato
El contador de comentarios no se actualiza en tiempo real cuando alguien comenta
No hay sistema de notificaciones push para nuevos likes/comentarios/seguidores
El sistema de menciones (@usuario) existe en backend pero no tiene autocompletado en frontend
Los hashtags (#tema) no son clickeables para filtrar posts por hashtag
Falta p谩gina de Explore funcional con b煤squeda y hashtags trending
STORIES:

No hay funcionalidad para eliminar historias propias
No hay reacciones a historias (responder con emoji)
La expiraci贸n de 24h existe en backend pero no se muestra tiempo restante en UI
El visor de stories no tiene swipe gesture en m贸vil
No hay indicador de "visto por X personas" para historias propias
2. NAVEGACIN Y UI
PROBLEMAS:

goToHome() tiene lista hardcodeada de pantallas a ocultar - si se a帽aden nuevas, no se ocultan
Los items del sidebar con secciones gen茅ricas solo muestran toast en lugar de navegar
El bot贸n atr谩s de Telegram no maneja todas las pantallas correctamente
Falta animaci贸n de transici贸n entre p谩ginas/secciones
La barra de navegaci贸n inferior no tiene badge de notificaciones
Los modales a veces no cierran correctamente al hacer click fuera
El sidebar overlay puede quedarse activo si la navegaci贸n falla
No hay skeleton loaders mientras cargan datos
3. SISTEMA DE WALLET/BUNK3RCOIN
PROBLEMAS:

El balance no se actualiza autom谩ticamente despu茅s de transacciones
La validaci贸n de direcciones TON es b谩sica (solo formato, no validez real)
Los pagos TON en estado "pending" pueden quedarse as铆 si la API falla
No hay historial de transacciones con filtros (fecha, tipo, monto)
Falta confirmaci贸n visual clara cuando se completa una recarga
El modo demo bypasea validaciones importantes
No hay l铆mite de intentos para verificaci贸n de pagos
4. BASE DE DATOS Y RENDIMIENTO
PROBLEMAS CRTICOS:

Se crea nueva conexi贸n para cada operaci贸n en lugar de usar connection pool
Faltan 铆ndices en columnas frecuentemente consultadas: status, user_id, created_at
get_tracking_history no tiene l铆mite, puede ser muy lento con historial largo
Las b煤squedas de posts/usuarios no est谩n optimizadas
No hay cach茅 para datos que cambian poco (estad铆sticas, configuraciones)
5. PERFILES DE USUARIO
PROBLEMAS:

El perfil propio no muestra grid de publicaciones como Instagram
No hay p谩gina de seguidores/siguiendo navegable
El avatar no tiene cropping/ajuste antes de subir
Falta edici贸n de bio/descripci贸n
No hay verificaci贸n de usuarios (badge verificado)
El contador de posts/seguidores/siguiendo puede desincronizarse
6. COMENTARIOS
PROBLEMAS:

Los comentarios no cargan autom谩ticamente al abrir un post
No hay paginaci贸n de comentarios (load more)
Las respuestas a comentarios no se muestran anidadas
No se puede editar un comentario despu茅s de enviarlo
No hay reacciones a comentarios individuales
Falta indicador de "escribiendo..." en tiempo real
7. NOTIFICACIONES
PROBLEMAS:

No existe sistema de notificaciones en la app principal
No hay badge de notificaciones no le铆das
Las notificaciones de Telegram solo se env铆an para transacciones grandes
Falta historial de notificaciones consultable
No hay configuraci贸n de preferencias de notificaciones
8. SEGURIDAD
PROBLEMAS:

El modo demo otorga is_owner = True sin verificaci贸n
Algunas alertas de seguridad pueden quedarse sin resolver
El sistema de dispositivos de confianza puede tener inconsistencias
Falta rate limiting en endpoints cr铆ticos (login, pagos, publicaciones)
Los logs de seguridad no tienen paginaci贸n
9. MARKETPLACE Y BOTS
PROBLEMAS:

Los productos no tienen sistema de categor铆as
No hay carrito de compras
Los bots comprados no muestran estado de activaci贸n
Falta panel de configuraci贸n de bots comprados
No hay sistema de reviews/valoraciones
10. NMEROS VIRTUALES (SMSPool)
PROBLEMAS MENORES:

El polling cada 5 segundos puede ser intensivo
No hay notificaci贸n push cuando llega SMS
El historial de 贸rdenes no tiene filtros

PROBLEMAS:

Algunos modales no son scrolleables en pantallas peque帽as
Los toasts pueden superponerse si aparecen m煤ltiples
El teclado en m贸vil puede tapar inputs
Falta modo landscape optimizado


PROMPT ADICIONAL - PROBLEMAS DETECTADOS (PARTE 2)
13. MEMORY LEAKS Y RECURSOS NO LIBERADOS
PROBLEMAS:

Los addEventListener no se remueven al cambiar de pantalla (acumulan listeners)
setInterval en virtual-numbers.js (polling SMS) no se limpia si el usuario navega fuera
setInterval de sesi贸n en app.js sigue corriendo aunque no sea necesario
_storyTimeout en el visor de stories puede no limpiarse si se cierra abruptamente
El intervalo de TON Connect (20 intentos cada 500ms) podr铆a persistir
Los timeouts de debounceEstimate en exchange no se cancelan al cerrar modal
14. CONDICIONES DE CARRERA (RACE CONDITIONS)
PROBLEMAS:

loadFeed() llamado r谩pidamente m煤ltiples veces puede sobreescribir datos m谩s recientes con datos antiguos
Las respuestas de API pueden llegar en orden diferente al que fueron enviadas
No hay cancelaci贸n de requests pendientes al iniciar uno nuevo
M煤ltiples clicks en bot贸n de like/save pueden enviar requests duplicados
La verificaci贸n de pagos TON puede llamarse m煤ltiples veces concurrentemente
15. CDIGO DUPLICADO (DRY VIOLATIONS)
PROBLEMAS:

apiRequest() est谩 duplicado en app.js Y en publications.js con l贸gica similar
showToast() est谩 implementado DOS veces con estilos diferentes
getDeviceIcon() est谩 duplicado en l铆neas 1055-1065 y 4082-4092 de app.js
getAuthHeaders() se reimplementa en varios lugares
Patrones de modal/overlay repetidos sin abstracci贸n
L贸gica de escape HTML repetida en vez de usar funci贸n centralizada
16. VULNERABILIDADES XSS POTENCIALES
PROBLEMAS:

En virtual-numbers.js: country.name, service.name se insertan directamente en HTML sin sanitizar
Tracking cards insertan t.recipientName, t.productName, t.deliveryAddress sin escape
Los comentarios de posts podr铆an contener HTML malicioso
c.ticker en lista de currencies no est谩 escapado
Los SMS recibidos (order.smsCode) se muestran sin sanitizaci贸n
Solo algunos lugares usan escapeHtml(), otros lo omiten
17. MANEJO DE ERRORES DEFICIENTE
PROBLEMAS:

loadStories() tiene try-catch pero solo hace console.error, no muestra error al usuario
loadFeed() falla silenciosamente sin feedback visual
Errores de descifrado en CryptoModule.decryptMedia() retornan null sin notificar
Muchas funciones async no tienen try-catch (promises sin manejar)
Los errores de API se muestran con str(e) exponiendo detalles internos
No hay fallback UI cuando componentes cr铆ticos fallan
18. VALIDACIN DE INPUT EN BACKEND
PROBLEMAS:

/api/tracking acepta campos como recipientName, productName sin sanitizar antes de guardar
/api/posts acepta caption y contentUrl sin validaci贸n profunda
/api/tracking/<id> PUT construye SQL din谩mico - aunque usa parameterized queries, el pattern es riesgoso
download_telegram_photo() no valida rigurosamente la URL (posible SSRF)
El avatar upload solo verifica extensi贸n, no contenido real del archivo
Campos de texto sin l铆mite de longitud definido
19. ACCESIBILIDAD (A11Y)
PROBLEMAS:

Faltan atributos aria-label en botones de iconos (わ, , 锔)
Los modales no tienen role="dialog" ni aria-modal="true"
El foco no se atrapa dentro de los modales abiertos
No hay navegaci贸n por teclado (Tab/Enter) en elementos interactivos custom
Las im谩genes de avatar solo tienen alt b谩sico, no descriptivo
El sidebar no tiene aria-expanded para indicar estado
Los toasts no usan role="alert" para lectores de pantalla
user-scalable=no impide zoom, problem谩tico para accesibilidad
20. GESTIN DE ESTADOS INCONSISTENTE
PROBLEMAS:

No hay estado global centralizado (cada m贸dulo maneja su propio estado)
PublicationsManager y App tienen estados separados que pueden desincronizarse
El usuario actual se almacena en m煤ltiples lugares
No hay forma de saber si hay operaciones pendientes globalmente
Los contadores (likes, follows, balance) se actualizan en distintos lugares
El estado de autenticaci贸n puede quedar inconsistente entre m贸dulos
21. LOGS EXCESIVOS EN PRODUCCIN
PROBLEMAS:

console.log extensivo en todo el c贸digo (~116+ instancias)
Logs de debug como "Loading feed...", "Feed response:" en producci贸n
No hay sistema para deshabilitar logs en producci贸n
Los logs pueden exponer datos sensibles (wallets, IDs)
No hay niveles de log (debug, info, warn, error)
22. ENDPOINTS SIN RATE LIMITING
PROBLEMAS:

/api/posts - crear publicaciones
/api/posts/<id>/like - dar likes
/api/comments - crear comentarios
/api/users/<id>/follow - seguir usuarios
/api/ton/payment/verify - verificar pagos
/api/2fa/verify - verificaci贸n 2FA
/api/vn/purchase - comprar n煤meros virtuales
23. TIMEOUTS Y REINTENTOS
PROBLEMAS:

Las llamadas a API no tienen timeout configurado (pueden colgar indefinidamente)
No hay l贸gica de retry para errores transitorios de red
El polling de SMS es cada 5 segundos sin backoff exponencial
La verificaci贸n de pagos TON cada 5 segundos puede ser muy intensiva
No hay manejo de errores de red vs errores de servidor
24. PROBLEMAS DE CLOUDINARY
PROBLEMAS:

Si falla la subida, el post queda en estado inconsistente
No hay limpieza de archivos hu茅rfanos en Cloudinary
Las URLs encriptadas pueden expirar sin manejo
No hay validaci贸n de tama帽o m谩ximo de archivo antes de cifrar
El proceso de cifrado en cliente es lento para archivos grandes sin progress real
25. MANEJO DE TOKENS/SESIONES
PROBLEMAS:

No hay refresh autom谩tico de la sesi贸n de Telegram
Si la sesi贸n expira durante una operaci贸n, falla sin recuperaci贸n
Los tokens de 2FA no tienen expiraci贸n clara en frontend
El estado last_2fa_verified_at no se usa para re-validar peri贸dicamente
No hay logout autom谩tico por inactividad configurado correctamente
26. PROBLEMAS EN CREACIN DE TABLAS
PROBLEMAS:

CREATE TABLE IF NOT EXISTS se ejecuta en endpoints de runtime (l铆nea 2102)
Esto deber铆a ser solo en inicializaci贸n, no en cada request
Las migraciones no est谩n versionadas
No hay rollback de esquema si algo falla
PRIORIDAD DEL COMPLEMENTO:
Vulnerabilidades XSS - Cr铆tico, sanitizar todo HTML
Race Conditions - Implementar cancelaci贸n de requests
Memory Leaks - Limpiar listeners e intervals
Rate Limiting - Proteger endpoints sensibles
Manejo de Errores - Feedback consistente al usuario
C贸digo Duplicado - Refactorizar a funciones compartidas