================================================================================
       PROMPT: SISTEMA COMPLETO DE PUBLICACIONES ENCRIPTADAS
================================================================================

OBJETIVO GENERAL
----------------
Implementar un sistema completo de publicaciones (fotos, videos, texto) en el 
perfil del usuario, usando almacenamiento externo (Cloudinary) con ENCRIPTACI√ìN 
DE EXTREMO A EXTREMO para todo el contenido. Todo p√∫blico dentro de la app, 
pero totalmente encriptado e inaccesible desde el exterior.

================================================================================
                        1. MODAL DE CREAR PUBLICACI√ìN
================================================================================

ACTIVACI√ìN: Al tocar el bot√≥n "+" en la pesta√±a de publicaciones del perfil.

INTERFAZ DEL MODAL:
- Selector de tipo de contenido: üì∑ Foto | üé¨ Video | ‚úçÔ∏è Solo Texto
- Bot√≥n para seleccionar archivo desde el dispositivo
- Vista previa del contenido seleccionado
- Campo de texto para descripci√≥n/caption (sin l√≠mite de caracteres)
- Soporte para escribir @menciones (autocompletado de usuarios)
- Soporte para #hashtags
- Bot√≥n "Publicar" y bot√≥n "Cancelar"

================================================================================
                       2. ALMACENAMIENTO Y ENCRIPTACI√ìN
================================================================================

FLUJO DE SUBIDA:
1. Usuario selecciona foto/video
2. El archivo se ENCRIPTA en el cliente antes de subir
3. Se sube el archivo encriptado a Cloudinary
4. Se guarda la URL encriptada en la base de datos
5. Solo usuarios autenticados dentro de la app pueden desencriptar y ver

ENCRIPTACI√ìN:
- Algoritmo: AES-256 para archivos
- Clave de encriptaci√≥n √∫nica por usuario o por publicaci√≥n
- Las claves se manejan de forma segura en el servidor
- Nadie externo puede ver el contenido real (solo datos encriptados)

================================================================================
                      3. VISUALIZACI√ìN DE PUBLICACIONES
================================================================================

LUGARES DONDE APARECEN:
- En el perfil del usuario (galer√≠a en cuadr√≠cula tipo Instagram)
- Cuando otros usuarios visitan ese perfil
- En el feed general de la comunidad

CADA PUBLICACI√ìN MUESTRA:
- Contenido (imagen/video/texto) desencriptado para usuarios autenticados
- Avatar y nombre del autor
- Fecha de publicaci√≥n
- Caption/descripci√≥n
- Contador de likes/reacciones
- Contador de comentarios
- Contador de vistas
- Botones de interacci√≥n

================================================================================
                     4. INTERACCIONES EN PUBLICACIONES
================================================================================

‚ù§Ô∏è LIKE/REACCIONES    ‚Üí Dar/quitar. M√∫ltiples emojis: ‚ù§Ô∏è üòÇ üòÆ üò¢ üî• üëè
                        Ver lista de qui√©n reaccion√≥ por cada emoji
üí¨ COMENTAR           ‚Üí Agregar comentarios. Ver todos los comentarios.
üîÑ COMPARTIR          ‚Üí Compartir publicaci√≥n (genera link interno)
‚úèÔ∏è EDITAR             ‚Üí Solo el due√±o puede editar su publicaci√≥n
üóëÔ∏è ELIMINAR           ‚Üí Solo el due√±o puede eliminar su publicaci√≥n
üîñ GUARDAR            ‚Üí Guardar en colecci√≥n privada de favoritos
üëÅÔ∏è VISTAS             ‚Üí Muestra cu√°ntas personas vieron la publicaci√≥n

================================================================================
                          5. MENCIONES (@usuario)
================================================================================

- Al escribir "@" aparece lista de usuarios para mencionar
- Autocompletado mientras escribe
- El usuario mencionado recibe notificaci√≥n
- Las menciones se destacan visualmente en el texto
- Funciona en publicaciones Y en comentarios

================================================================================
                           6. HASHTAGS (#tema)
================================================================================

- Al escribir "#" se pueden crear etiquetas
- Los hashtags son clickeables
- Al tocar un hashtag muestra todas las publicaciones con esa etiqueta
- Posibilidad de buscar por hashtag
- Secci√≥n de "Hashtags Trending" con los m√°s usados

================================================================================
                          7. GALER√çA EN EL PERFIL
================================================================================

- Vista en cuadr√≠cula (3 columnas) con miniaturas
- Al tocar una publicaci√≥n se abre en pantalla completa
- Scroll infinito para cargar m√°s publicaciones
- Indicador de tipo (icono de video si es video, carrusel si tiene m√∫ltiples)

================================================================================
                      8. VISTA DETALLE DE PUBLICACI√ìN
================================================================================

Cuando se abre una publicaci√≥n:
- Imagen/video en tama√±o grande (carrusel si son m√∫ltiples)
- Caption completo con menciones y hashtags clickeables
- Contador de vistas
- Lista de comentarios con hilos de respuestas
- Campo para agregar comentario
- Botones de reacci√≥n/like/compartir/guardar
- Men√∫ de opciones (editar/eliminar si es el due√±o, reportar/bloquear si no)

================================================================================
                         9. MEJORAS EN IM√ÅGENES
================================================================================

- M√öLTIPLES FOTOS (CARRUSEL): Hasta 10 fotos en una sola publicaci√≥n
- RECORTAR IMAGEN: Ajustar proporci√≥n antes de subir
- COMPRESI√ìN AUTOM√ÅTICA: Optimiza peso sin perder calidad visible

================================================================================
                          10. MEJORAS EN VIDEOS
================================================================================

- L√çMITE DE DURACI√ìN: M√°ximo 1 minuto por video en publicaciones
- REPRODUCCI√ìN AUTOM√ÅTICA: Videos se reproducen solos en el feed (sin sonido)
- MINIATURA AUTOM√ÅTICA: Se genera preview/thumbnail del video
- BARRA DE PROGRESO: Muestra cu√°nto falta del video

================================================================================
                      11. SISTEMA DE NOTIFICACIONES
================================================================================

El usuario recibe notificaci√≥n cuando:
- üîî Alguien da like/reacci√≥n a su publicaci√≥n
- üí¨ Alguien comenta en su publicaci√≥n
- üì£ Alguien lo menciona (@usuario)
- üë§ Alguien comienza a seguirlo
- üîÑ Alguien comparte su publicaci√≥n
- üì± Alguien responde a su historia

================================================================================
                        12. GUARDADOS/FAVORITOS
================================================================================

- GUARDAR PUBLICACI√ìN: Bot√≥n de bookmark en cada publicaci√≥n
- COLECCI√ìN PRIVADA: Secci√≥n en el perfil para ver todas las guardadas
- Solo el usuario ve sus publicaciones guardadas

================================================================================
                       13. COMENTARIOS AVANZADOS
================================================================================

- RESPONDER COMENTARIOS: Crear hilos de respuestas anidadas
- LIKE EN COMENTARIOS: Dar like a un comentario espec√≠fico
- MENCIONES EN COMENTARIOS: @usuario dentro de comentarios
- FIJAR COMENTARIO: El due√±o puede fijar un comentario arriba

================================================================================
                      14. CONTROLES DE PRIVACIDAD
================================================================================

- REPORTAR PUBLICACI√ìN: Bot√≥n para reportar contenido inapropiado
  ‚Üí Se crea secci√≥n "REPORTES" en el Panel de Administraci√≥n
  ‚Üí Muestra lista de publicaciones reportadas para revisar
  
- BLOQUEAR USUARIO: 
  ‚Üí El bloqueado no puede ver tu contenido
  ‚Üí T√∫ no ves el contenido del bloqueado
  ‚Üí No pueden interactuar entre s√≠

================================================================================
                      15. DESCUBRIMIENTO Y EXPLORAR
================================================================================

- P√ÅGINA EXPLORAR: Secci√≥n con publicaciones populares/trending
- HASHTAGS TRENDING: Los hashtags m√°s usados del momento
- BUSCAR POR TEXTO: Buscar palabras en captions de publicaciones
- SUGERENCIAS DE USUARIOS: "Personas que quiz√°s conozcas" basado en conexiones

================================================================================
                           16. ESTAD√çSTICAS
================================================================================

- VISTAS EN PUBLICACI√ìN: Cu√°ntas personas la vieron
- ALCANCE DEL PERFIL: Estad√≠sticas generales (visitas al perfil, engagement)

================================================================================
                       17. HISTORIAS (24 HORAS)
================================================================================

- CREAR HISTORIA: Foto o video que desaparece en 24 horas
- L√çMITE DE DURACI√ìN: M√°ximo 15 segundos por historia (video)
- VER QUI√âN VIO: Lista de usuarios que vieron tu historia
- RESPONDER A HISTORIA: Env√≠a mensaje directo al autor
- Aparecen en c√≠rculos arriba del feed (estilo Instagram)

================================================================================
                        18. COMPARTIR AVANZADO
================================================================================

- REPOSTEAR: Republicar en tu perfil (como retweet), muestra original
- COMPARTIR EN MENSAJE: Enviar publicaci√≥n a un usuario espec√≠fico (DM)
- CITAR PUBLICACI√ìN: Compartir a√±adiendo tu propio comentario encima

================================================================================
                          19. SEGURIDAD TOTAL
================================================================================

‚úÖ Archivos encriptados ANTES de subir a Cloudinary (cliente)
‚úÖ URLs y contenido encriptado en la base de datos
‚úÖ Solo usuarios autenticados (v√≠a Telegram) pueden ver contenido
‚úÖ Desencriptaci√≥n solo ocurre dentro de la app
‚úÖ Nadie externo puede acceder a las publicaciones reales
‚úÖ Sistema de reportes para moderaci√≥n
‚úÖ Sistema de bloqueo entre usuarios

================================================================================
                     20. COMPONENTES T√âCNICOS A CREAR
================================================================================

BACKEND (Python/Flask):
- Endpoint para crear publicaci√≥n con encriptaci√≥n
- Endpoint para obtener publicaciones (con desencriptaci√≥n)
- Endpoint para subir m√∫ltiples im√°genes (carrusel)
- Endpoints para likes/reacciones
- Endpoints para comentarios (crear, responder, like, fijar)
- Endpoints para compartir/repostear/citar
- Endpoints para editar/eliminar
- Endpoints para guardar/favoritos
- Sistema de menciones y notificaciones
- Sistema de hashtags y trending
- Sistema de historias (crear, listar, marcar vistas)
- Sistema de reportes (para admin)
- Sistema de bloqueo de usuarios
- Endpoints para explorar y buscar
- Endpoints para estad√≠sticas y vistas

FRONTEND (JavaScript):
- Modal de crear publicaci√≥n (con selector m√∫ltiple de fotos)
- Recortador de im√°genes
- Encriptaci√≥n del lado del cliente (AES-256)
- Galer√≠a de publicaciones (grid responsive)
- Vista detalle de publicaci√≥n (con carrusel)
- Componentes de interacci√≥n (reacciones, comentarios con hilos)
- Autocompletado de menciones y hashtags
- Reproductor de video con autoplay y progreso
- Secci√≥n de historias (crear y ver)
- P√°gina de explorar
- Buscador
- Secci√≥n de favoritos/guardados
- Panel de notificaciones
- Sistema de reportar/bloquear

BASE DE DATOS (Tablas nuevas/modificadas):
- posts (publicaciones)
- post_media (para carrusel de im√°genes)
- post_reactions (likes con tipo de emoji)
- post_comments (comentarios)
- comment_likes (likes en comentarios)
- post_hashtags (relaci√≥n posts-hashtags)
- hashtags (lista de hashtags)
- post_mentions (menciones en posts)
- post_saves (publicaciones guardadas)
- post_shares (compartidos/reposts)
- post_views (vistas de publicaciones)
- stories (historias)
- story_views (qui√©n vio cada historia)
- user_blocks (usuarios bloqueados)
- reports (reportes para admin)
- notifications (notificaciones)

================================================================================
                        21. RESUMEN VISUAL DEL FLUJO
================================================================================

Usuario toca "+" 
       ‚Üì
Modal: Selecciona foto(s)/video/texto
       ‚Üì
Recorta im√°genes si es necesario
       ‚Üì
Escribe caption + @menciones + #hashtags
       ‚Üì
Vista previa del contenido
       ‚Üì
Toca "Publicar"
       ‚Üì
Archivo(s) se ENCRIPTAN (cliente)
       ‚Üì
Sube a Cloudinary (encriptado)
       ‚Üì
Guarda en base de datos
       ‚Üì
Aparece en: Perfil + Feed + Explorar
       ‚Üì
Otros usuarios ven (desencriptado dentro de la app)
       ‚Üì
Pueden: Reaccionar, Comentar, Compartir, Guardar, Reportar

================================================================================
                         22. FLUJO DE HISTORIAS
================================================================================

Usuario toca "+" en secci√≥n historias
       ‚Üì
Selecciona foto o video (m√°x 15 seg)
       ‚Üì
Vista previa
       ‚Üì
Publica historia
       ‚Üì
Archivo se ENCRIPTA
       ‚Üì
Sube a Cloudinary (encriptado)
       ‚Üì
Aparece en c√≠rculo de historias (24 horas)
       ‚Üì
Otros usuarios pueden ver y responder
       ‚Üì
El autor ve qui√©n la vio
       ‚Üì
Se elimina autom√°ticamente despu√©s de 24h

================================================================================
                              FIN DEL PROMPT
================================================================================